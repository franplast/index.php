!function(){"use strict";window.JCNewsDetailBrands||(window.JCNewsDetailBrands=function(t){this.config="",this.visual={ID:""},this.item={productIds:[]},this.obItem=null,this.obTabs=null,this.obTabsBlock=null,this.obTabContainers=null,this.obSectionsLinks=null,this.errorCode=0,"object"==typeof t&&(this.config=t.CONFIG,this.visual=t.VISUAL,this.item.productIds=t.ITEM.PRODUCT_IDS,BX.ready(BX.delegate(this.init,this)))},window.JCNewsDetailBrands.prototype={init:function(){this.obItem=BX(this.visual.ID),this.obItem||(this.errorCode=-1),0===this.errorCode&&(this.obTabs=this.obItem.querySelector(".brands-detail-tabs-container"),this.obTabsBlock=!!this.obTabs&&this.obTabs.querySelector('[data-entity="tabs"]'),this.obTabContainers=this.obItem.querySelector(".brands-detail-tabs-content"),this.obTabs&&(this.initTabs(),this.obTabsBlock&&(this.tabsPanelFixed=!1,this.tabsPanelScrolled=!1,this.lastScrollTop=0,this.checkTopTabsBlockScroll(),BX.bind(window,"scroll",BX.proxy(this.checkTopTabsBlockScroll,this)),BX.bind(window,"resize",BX.proxy(this.checkTopTabsBlockResize,this)),this.checkActiveTabsBlock(),BX.bind(window,"scroll",BX.proxy(this.checkActiveTabsBlock,this)),BX.bind(window,"resize",BX.proxy(this.checkActiveTabsBlock,this)))),this.obSectionsLinks=this.obItem.querySelector(".brands-detail-sections-links"),this.obSectionsLinks&&this.initSectionsLinks())},initTabs:function(){var t,e,s=this.obTabs.querySelector(".brands-detail-tabs-list"),i=!!s&&s.querySelectorAll('[data-entity="tab"]'),o=!1;if(s&&(BX.addClass(s,"owl-carousel"),$(s).owlCarousel({autoWidth:!0,nav:!0,navText:['<i class="icon-arrow-left"></i>','<i class="icon-arrow-right"></i>'],navContainer:".brands-detail-tabs-scroll",dots:!1}),i))for(var a in i)i.hasOwnProperty(a)&&BX.type.isDomNode(i[a])&&(t=i[a].getAttribute("data-value"))&&(e=this.obTabContainers.querySelector('[data-value="'+t+'"]'),BX.type.isDomNode(e)&&(BX.bind(i[a],"click",BX.proxy(this.changeTab,this)),o?BX.removeClass(i[a],"active"):(BX.addClass(i[a],"active"),o=!0)))},checkTopTabsBlockScroll:function(){var t=document.querySelector(".top-panel"),e=0,s=!!t&&t.querySelector(".top-panel__thead"),i=!!t&&t.querySelector(".top-panel__tfoot"),o=BX.pos(this.obTabs).top,a=this.obTabsBlock,n=a.offsetHeight,l=BX.GetWindowScrollPos().scrollTop;if(window.innerWidth<992)if(s&&BX.hasClass(s,"fixed")&&(e=s.offsetHeight,i&&BX.hasClass(i,"visible")&&(e+=i.offsetHeight)),l+e>=o)if(this.tabsPanelFixed)if(!this.tabsPanelScrolled&&e>0&&l<this.lastScrollTop){this.tabsPanelScrolled=!0;var r=this.tabsPanelScrolled;new BX.easing({duration:300,start:{top:Math.abs(parseInt(BX.style(a,"top"),10))},finish:{top:e},transition:BX.easing.transitions.linear,step:function(t){r&&BX.style(a,"top",t.top+"px")}}).animate()}else this.tabsPanelScrolled&&e>0&&l>this.lastScrollTop&&(this.tabsPanelScrolled=!1,new BX.easing({duration:300,start:{top:Math.abs(parseInt(BX.style(a,"top"),10))},finish:{top:e},transition:BX.easing.transitions.linear,step:function(t){BX.style(a,"top",t.top+"px")}}).animate());else this.tabsPanelFixed=!0,BX.style(this.obTabs,"height",n+"px"),BX.style(a,"top",e+"px"),BX.addClass(a,"fixed");else this.tabsPanelFixed&&l+e<o&&(this.tabsPanelFixed=!1,this.tabsPanelScrolled=!1,this.obTabs.removeAttribute("style"),a.removeAttribute("style"),BX.removeClass(a,"fixed"));else t&&BX.hasClass(t,"fixed")&&(e=t.offsetHeight),!this.tabsPanelFixed&&l+e>=o?(this.tabsPanelFixed=!0,BX.style(this.obTabs,"height",n+"px"),BX.style(a,"top",e+"px"),BX.addClass(a,"fixed")):this.tabsPanelFixed&&l+e<o&&(this.tabsPanelFixed=!1,this.obTabs.removeAttribute("style"),a.removeAttribute("style"),BX.removeClass(a,"fixed"));this.lastScrollTop=l},checkTopTabsBlockResize:function(){if(BX.hasClass(this.obTabsBlock,"fixed")){var t=document.querySelector(".top-panel"),e=0,s=!!t&&t.querySelector(".top-panel__thead"),i=!!t&&t.querySelector(".top-panel__tfoot");window.innerWidth<992?s&&BX.hasClass(s,"fixed")&&(e=s.offsetHeight,i&&BX.hasClass(i,"visible")&&(e+=i.offsetHeight)):(t&&BX.hasClass(t,"fixed")&&(e=t.offsetHeight),this.tabsPanelScrolled=!1),BX.style(this.obTabsBlock,"top",e+"px")}},checkActiveTabsBlock:function(){var t=document.querySelector(".top-panel"),e=0,s=!!t&&t.querySelector(".top-panel__thead"),i=!!t&&t.querySelector(".top-panel__tfoot"),o=this.obTabsBlock,a=0,n=this.obTabContainers.querySelectorAll('[data-entity="tab-container"]'),l=this.obTabs.querySelectorAll('[data-entity="tab"]'),r=BX.GetWindowScrollPos().scrollTop;if(n&&l){window.innerWidth<992?s&&BX.hasClass(s,"fixed")&&(e=s.offsetHeight,i&&BX.hasClass(i,"visible")&&(e+=i.offsetHeight)):t&&BX.hasClass(t,"fixed")&&(e=t.offsetHeight),o&&BX.hasClass(o,"fixed")&&(a=o.offsetHeight);var c=r+e+a,h=Object.keys(n).length;for(var d in n)if(n.hasOwnProperty(d)&&BX.type.isDomNode(n[d])){var b=n[d].getAttribute("data-value");if(b)if(c>=BX.pos(n[d]).top&&c<=BX.pos(n[h-1]).bottom){for(var B in l)if(l.hasOwnProperty(B)&&BX.type.isDomNode(l[B])){var p=l[B].getAttribute("data-value");p&&(p===b?BX.addClass(l[B],"active"):BX.removeClass(l[B],"active"))}}else if(c>BX.pos(n[h-1]).bottom)for(var B in l)l.hasOwnProperty(B)&&BX.type.isDomNode(l[B])&&BX.removeClass(l[B],"active")}}},changeTab:function(t){BX.PreventDefault(t),BX.unbind(window,"scroll",BX.proxy(this.checkActiveTabsBlock,this));var e,s,i=BX.proxy_context&&BX.proxy_context.getAttribute("data-value");if(i){if(e=this.obTabContainers.querySelectorAll('[data-entity="tab-container"]'))for(var o in e)if(e.hasOwnProperty(o)&&BX.type.isDomNode(e[o])&&e[o].getAttribute("data-value")===i){var a=document.querySelector(".top-panel"),n=0,l=!!a&&a.querySelector(".top-panel__thead"),r=!!a&&a.querySelector(".top-panel__tfoot"),c=BX.pos(e[o]).top,h=BX.GetWindowScrollPos().scrollTop;window.innerWidth<992?l&&(n=l.offsetHeight,h+this.obTabsBlock.offsetHeight+n>c&&r&&(n+=r.offsetHeight)):a&&(n=a.offsetHeight),new BX.easing({duration:500,start:{scroll:h},finish:{scroll:c-this.obTabsBlock.offsetHeight-n},transition:BX.easing.makeEaseOut(BX.easing.transitions.quint),step:BX.delegate(function(t){window.scrollTo(0,t.scroll)},this),complete:BX.delegate(function(){BX.bind(window,"scroll",BX.proxy(this.checkActiveTabsBlock,this))},this)}).animate()}if(s=this.obTabs.querySelectorAll('[data-entity="tab"]'))for(var o in s)s.hasOwnProperty(o)&&BX.type.isDomNode(s[o])&&(s[o].getAttribute("data-value")===i?BX.addClass(s[o],"active"):BX.removeClass(s[o],"active"))}},initSectionsLinks:function(){var t=this.obSectionsLinks.querySelectorAll(".brands-detail-section-link"),e=!1;if(t)for(var s in t)t.hasOwnProperty(s)&&BX.type.isDomNode(t[s])&&(BX.bind(t[s],"click",BX.proxy(this.changeSectionLink,this)),e?BX.removeClass(t[s],"active"):(BX.addClass(t[s],"active"),e=!0))},changeSectionLink:function(t){BX.PreventDefault(t);var e=BX.proxy_context&&BX.proxy_context.getAttribute("data-section-id");if(!BX.hasClass(BX.proxy_context,"active")&&e){var s=this.obItem.querySelector(".brands-detail-products");s&&(s.style.opacity=.2,BX.ajax.post(BX.message("BRAND_TEMPLATE_PATH")+"/ajax.php",{action:"changeSectionLink",REQUEST_URI:window.location.href,siteId:BX.message("SITE_ID"),parameters:this.config,productIds:this.item.productIds,sectionId:e},BX.delegate(function(t){s.innerHTML=t,new BX.easing({duration:2e3,start:{opacity:20},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(t){s.style.opacity=t.opacity/100},complete:function(){s.removeAttribute("style")}}).animate()},this)));var i=this.obSectionsLinks.querySelectorAll(".brands-detail-section-link");if(i)for(var o in i)i.hasOwnProperty(o)&&BX.type.isDomNode(i[o])&&(i[o].getAttribute("data-section-id")===e?BX.addClass(i[o],"active"):BX.removeClass(i[o],"active"))}}})}();