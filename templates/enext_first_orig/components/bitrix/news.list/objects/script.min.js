!function(t){"use strict";t.JCNewsListObjectsComponent||(t.JCNewsListObjectsComponent=function(t){this.formPosting=!1,this.siteId=t.siteId||"",this.template=t.template||"",this.parameters=t.parameters||"",t.navParams&&(this.navParams={NavNum:t.navParams.NavNum||1,NavPageNomer:parseInt(t.navParams.NavPageNomer)||1,NavPageCount:parseInt(t.navParams.NavPageCount)||1}),this.container=document.querySelector("[data-entity='container-"+this.navParams.NavNum+"']"),this.showMoreButton=null,this.showMoreButtonMessage=null,this.showMoreButtonContainer=null,t.lazyLoad&&(this.showMoreButton=document.querySelector('[data-use="show-more-'+this.navParams.NavNum+'"]'),this.showMoreButtonMessage=this.showMoreButton.innerHTML,this.showMoreButtonContainer=document.querySelector('[data-entity="objects-show-more-container"]'),BX.bind(this.showMoreButton,"click",BX.proxy(this.showMore,this)))},t.JCNewsListObjectsComponent.prototype={checkButton:function(){this.showMoreButton&&(this.navParams.NavPageNomer==this.navParams.NavPageCount?BX.remove(this.showMoreButtonContainer):this.container.appendChild(this.showMoreButtonContainer))},enableButton:function(){this.showMoreButton&&(BX.removeClass(this.showMoreButton,"disabled"),this.showMoreButton.innerHTML=this.showMoreButtonMessage)},disableButton:function(){this.showMoreButton&&(BX.addClass(this.showMoreButton,"disabled"),this.showMoreButton.innerHTML=BX.message("OBJECTS_LOADING"))},showMore:function(){if(this.navParams.NavPageNomer<this.navParams.NavPageCount){var s={action:"showMoreObjects"};s.REQUEST_URI=t.location.pathname,s["PAGEN_"+this.navParams.NavNum]=this.navParams.NavPageNomer+1,this.formPosting||(this.formPosting=!0,this.disableButton(),this.sendRequest(s))}},sendRequest:function(t){var s={siteId:this.siteId,template:this.template,parameters:this.parameters};BX.ajax({url:BX.message("OBJECTS_TEMPLATE_PATH")+"/ajax.php"+(-1!==document.location.href.indexOf("clear_cache=Y")?"?clear_cache=Y":""),method:"POST",dataType:"json",timeout:60,data:BX.merge(s,t),onsuccess:BX.delegate(function(t){t&&t.JS&&BX.ajax.processScripts(BX.processHTML(t.JS).SCRIPT,!1,BX.delegate(function(){this.processShowMoreAction(t)},this))},this)})},processShowMoreAction:function(t){this.formPosting=!1,this.enableButton(),t&&(this.navParams.NavPageNomer++,this.processItems(t.items),this.processPagination(t.pagination),this.checkButton())},processItems:function(t,s){if(t){var e,i=BX.processHTML(t,!1),a=BX.create("DIV");if(a.innerHTML=i.HTML,(e=a.querySelectorAll('[data-entity="item"]')).length){for(var o in e)e.hasOwnProperty(o)&&(e[o].style.opacity=0,this.container.appendChild(e[o]));new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(t){for(var s in e)e.hasOwnProperty(s)&&(e[s].style.opacity=t.opacity/100)},complete:function(){for(var t in e)e.hasOwnProperty(t)&&e[t].removeAttribute("style")}}).animate()}BX.ajax.processScripts(i.SCRIPT)}},processPagination:function(t){if(t){var s=document.querySelector('[data-pagination-num="'+this.navParams.NavNum+'"]');s&&(s.innerHTML=t)}}}),t.JCNewsListObjects||(t.JCNewsListObjects=function(t){this.visual={ID:""},this.item={id:0,name:"",address:"",timezone:"",workingHours:{},phone:{},email:{},skype:{},callbackForm:!1},this.sPanel=null,this.sPanelContent=null,this.obItem=null,this.errorCode=0,"object"==typeof t&&(this.visual=t.VISUAL,this.item.id=t.ITEM.ID,this.item.name=t.ITEM.NAME,this.item.address=t.ITEM.ADDRESS,this.item.timezone=t.ITEM.TIMEZONE,this.item.workingHours=t.ITEM.WORKING_HOURS,this.item.phone=t.ITEM.PHONE.VALUE,this.item.phoneDescription=t.ITEM.PHONE.DESCRIPTION,this.item.email=t.ITEM.EMAIL.VALUE,this.item.emailDescription=t.ITEM.EMAIL.DESCRIPTION,this.item.skype=t.ITEM.SKYPE.VALUE,this.item.skypeDescription=t.ITEM.SKYPE.DESCRIPTION,this.item.callbackForm=t.ITEM.CALLBACK_FORM,BX.ready(BX.delegate(this.init,this)))},t.JCNewsListObjects.prototype={init:function(){if(this.sPanel=document.body.querySelector(".slide-panel"),this.obItem=BX(this.visual.ID),this.obItem||(this.errorCode=-1),0===this.errorCode){this.showWorkingHoursToday();var t=this.obItem.querySelector(".object-item-btn");t&&BX.bind(t,"click",BX.proxy(this.item.callbackForm?this.showContactsWidthForm:this.showContacts,this)),this.sPanel&&(BX.bind(document,"click",BX.delegate(function(t){if(BX.hasClass(this.sPanel,"active")&&BX.findParent(t.target,{attrs:{id:this.visual.ID+"_contacts"}})&&BX.hasClass(t.target,"icon-arrow-down")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours-today"}});s&&BX.style(s,"display","none");var e=BX(this.visual.ID+"_contacts").querySelector('[data-entity="working-hours"]');e&&BX.style(e,"display",""),t.stopPropagation()}},this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.hasClass(this.sPanel,"active")&&BX.findParent(t.target,{attrs:{id:this.visual.ID+"_contacts"}})&&BX.hasClass(t.target,"icon-arrow-up")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours"}});s&&BX.style(s,"display","none");var e=BX(this.visual.ID+"_contacts").querySelector('[data-entity="working-hours-today"]');e&&BX.style(e,"display",""),t.stopPropagation()}},this)))}},showWorkingHoursToday:function(){var t=this.obItem.querySelector(".object-item-hours");t&&(t.innerHTML='<i class="fa fa-spinner fa-pulse"></i>'+BX.message("OBJECTS_LOADING"),BX.removeClass(t,"object-item-hours-hidden"),BX.ajax({url:BX.message("OBJECTS_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"workingHoursToday",timezone:this.item.timezone,workingHours:this.item.workingHours},onsuccess:BX.delegate(function(s){var e="";if(s.today)for(var i in this.item.workingHoursToday=s.today,this.item.workingHoursToday)this.item.workingHoursToday.hasOwnProperty(i)&&(this.item.workingHoursToday[i].STATUS&&(e+='<span class="object-item-hours-icon object-item-hours-icon-'+("OPEN"==this.item.workingHoursToday[i].STATUS?"open":"closed")+'"></span>'),this.item.workingHoursToday[i].WORK_START&&this.item.workingHoursToday[i].WORK_END?this.item.workingHoursToday[i].WORK_START!=this.item.workingHoursToday[i].WORK_END?(e+=this.item.workingHoursToday[i].WORK_START+" - "+this.item.workingHoursToday[i].WORK_END,this.item.workingHoursToday[i].BREAK_START&&this.item.workingHoursToday[i].BREAK_END&&this.item.workingHoursToday[i].BREAK_START!=this.item.workingHoursToday[i].BREAK_END&&(e+='<span class="object-item-hours-break">',e+=BX.message("OBJECT_ITEM_BREAK")+" "+this.item.workingHoursToday[i].BREAK_START+" - "+this.item.workingHoursToday[i].BREAK_END,e+="</span>")):e+=BX.message("OBJECT_ITEM_24_HOURS"):e+=BX.message("OBJECT_ITEM_OFF"));t.innerHTML=e,0==e.length&&BX.addClass(t,"object-item-hours-hidden")},this)}))},adjustContacts:function(){var t="";if(this.item.address||this.item.workingHours||this.item.workingHoursToday||this.item.phone||this.item.email||this.item.skype){if(t+='<div class="slide-panel__contacts" id="'+this.visual.ID+'_contacts">',this.item.address&&(t+='<div class="slide-panel__contacts-item">',t+='<div class="slide-panel__contacts-item__block">',t+='<div class="slide-panel__contacts-item__icon"><i class="icon-map-marker"></i></div>',t+='<div class="slide-panel__contacts-item__text">'+this.item.address+"</div>",t+="</div>",t+="</div>"),this.item.workingHoursToday)for(var s in this.item.workingHoursToday)this.item.workingHoursToday.hasOwnProperty(s)&&(t+='<div class="slide-panel__contacts-item" data-entity="working-hours-today">',t+='<div class="slide-panel__contacts-item__hours-today">',t+='<div class="slide-panel__contacts-item__today-container">',t+='<div class="slide-panel__contacts-item__today">',t+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>',t+='<span class="slide-panel__contacts-item__today-title">'+BX.message("OBJECT_ITEM_TODAY")+"</span>",this.item.workingHoursToday[s].STATUS&&(t+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.item.workingHoursToday[s].STATUS?"open":"closed")+'"></span>'),t+="</div>",t+="</div>",t+='<div class="slide-panel__contacts-item__hours-break">',t+='<div class="slide-panel__contacts-item__hours slide-panel__contacts-item__hours-first">',t+='<span class="slide-panel__contacts-item__hours-title">',this.item.workingHoursToday[s].WORK_START&&this.item.workingHoursToday[s].WORK_END?this.item.workingHoursToday[s].WORK_START!=this.item.workingHoursToday[s].WORK_END?t+=this.item.workingHoursToday[s].WORK_START+" - "+this.item.workingHoursToday[s].WORK_END:t+=BX.message("OBJECT_ITEM_24_HOURS"):t+=BX.message("OBJECT_ITEM_OFF"),t+="</span>",t+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-down"></i></span>',t+="</div>",this.item.workingHoursToday[s].WORK_START&&this.item.workingHoursToday[s].WORK_END&&this.item.workingHoursToday[s].WORK_START!=this.item.workingHoursToday[s].WORK_END&&this.item.workingHoursToday[s].BREAK_START&&this.item.workingHoursToday[s].BREAK_END&&this.item.workingHoursToday[s].BREAK_START!=this.item.workingHoursToday[s].BREAK_END&&(t+='<div class="slide-panel__contacts-item__break">',t+=BX.message("OBJECT_ITEM_BREAK")+" "+this.item.workingHoursToday[s].BREAK_START+" - "+this.item.workingHoursToday[s].BREAK_END,t+="</div>"),t+="</div>",t+="</div>",t+="</div>");if(this.item.workingHours){t+='<div class="slide-panel__contacts-item" data-entity="working-hours"'+(this.item.workingHoursToday?'style="display: none;"':"")+">";var e=0;for(var s in this.item.workingHours)this.item.workingHours.hasOwnProperty(s)&&(t+='<div class="slide-panel__contacts-item__hours-today">',t+='<div class="slide-panel__contacts-item__today-container">',t+='<div class="slide-panel__contacts-item__today">',0==e&&(t+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>'),t+='<span class="slide-panel__contacts-item__today-title">'+(this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(s)?BX.message("OBJECT_ITEM_TODAY"):this.item.workingHours[s].NAME)+"</span>",this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(s)&&this.item.workingHoursToday[s].STATUS&&(t+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.item.workingHoursToday[s].STATUS?"open":"closed")+'"></span>'),t+="</div>",t+="</div>",t+='<div class="slide-panel__contacts-item__hours-break">',t+='<div class="slide-panel__contacts-item__hours'+(0==e?" slide-panel__contacts-item__hours-first":"")+'">',t+='<span class="slide-panel__contacts-item__hours-title">',this.item.workingHours[s].WORK_START&&this.item.workingHours[s].WORK_END?this.item.workingHours[s].WORK_START!=this.item.workingHours[s].WORK_END?t+=this.item.workingHours[s].WORK_START+" - "+this.item.workingHours[s].WORK_END:t+=BX.message("OBJECT_ITEM_24_HOURS"):t+=BX.message("OBJECT_ITEM_OFF"),t+="</span>",this.item.workingHoursToday&&0==e&&(t+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-up"></i></span>'),t+="</div>",this.item.workingHours[s].WORK_START&&this.item.workingHours[s].WORK_END&&this.item.workingHours[s].WORK_START!=this.item.workingHours[s].WORK_END&&this.item.workingHours[s].BREAK_START&&this.item.workingHours[s].BREAK_END&&this.item.workingHours[s].BREAK_START!=this.item.workingHours[s].BREAK_END&&(t+='<div class="slide-panel__contacts-item__break">',t+=BX.message("OBJECT_ITEM_BREAK")+" "+this.item.workingHours[s].BREAK_START+" - "+this.item.workingHours[s].BREAK_END,t+="</div>"),t+="</div>",t+="</div>",e++);t+="</div>"}if(this.item.phone)for(var s in this.item.phone)this.item.phone.hasOwnProperty(s)&&(t+='<div class="slide-panel__contacts-item">',t+='<div class="slide-panel__contacts-item__block">',t+='<div class="slide-panel__contacts-item__icon"><i class="icon-phone"></i></div>',t+='<div class="slide-panel__contacts-item__text">',t+='<a class="slide-panel__contacts-item__phone slide-panel__contacts-item__link" href="tel:'+this.item.phone[s].replace(/[^\d\+]/g,"")+'">'+this.item.phone[s]+"</a>",this.item.phoneDescription.hasOwnProperty(s)&&this.item.phoneDescription[s].length>0&&(t+='<span class="slide-panel__contacts-item__descr">'+this.item.phoneDescription[s]+"</span>"),t+="</div>",t+="</div>",t+="</div>");if(this.item.email)for(var s in this.item.email)this.item.email.hasOwnProperty(s)&&(t+='<div class="slide-panel__contacts-item">',t+='<div class="slide-panel__contacts-item__block">',t+='<div class="slide-panel__contacts-item__icon"><i class="icon-mail"></i></div>',t+='<div class="slide-panel__contacts-item__text">',t+='<a class="slide-panel__contacts-item__link" href="mailto:'+this.item.email[s]+'">'+this.item.email[s]+"</a>",this.item.emailDescription.hasOwnProperty(s)&&this.item.emailDescription[s].length>0&&(t+='<span class="slide-panel__contacts-item__descr">'+this.item.emailDescription[s]+"</span>"),t+="</div>",t+="</div>",t+="</div>");if(this.item.skype)for(var s in this.item.skype)this.item.skype.hasOwnProperty(s)&&(t+='<div class="slide-panel__contacts-item">',t+='<div class="slide-panel__contacts-item__block">',t+='<div class="slide-panel__contacts-item__icon"><i class="fa fa-skype"></i></div>',t+='<div class="slide-panel__contacts-item__text">',t+='<a class="slide-panel__contacts-item__link" href="skype:'+this.item.skype[s]+'?chat">'+this.item.skype[s]+"</a>",this.item.skypeDescription.hasOwnProperty(s)&&this.item.skypeDescription[s].length>0&&(t+='<span class="slide-panel__contacts-item__descr">'+this.item.skypeDescription[s]+"</span>"),t+="</div>",t+="</div>",t+="</div>");t+="</div>",this.sPanelContent=t}},showContactsWidthForm:function(){this.sPanel&&(this.adjustContacts(),BX.ajax.post(BX.message("SITE_DIR")+"ajax/slide_panel.php",{action:"callback_objects"},BX.delegate(function(s){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"},html:this.item.name}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},html:this.sPanelContent?this.sPanelContent+s:s}));var e=this.sPanel.querySelector(".slide-panel__content");e&&$(e).scrollbar();var i=this.sPanel.querySelector('[name="OBJECT_ID"]');i&&(i.value=this.item.id);var a=t.innerWidth-document.body.clientWidth;if(a>0){BX.style(document.body,"padding-right",a+"px");var o=document.querySelector(".page-bg");o&&BX.style(o,"margin-right",a+"px");var n=document.querySelector(".top-panel");if(n){BX.hasClass(n,"fixed")&&BX.style(n,"padding-right",a+"px");var r=n.querySelector(".top-panel__thead");r&&BX.hasClass(r,"fixed")&&BX.style(r,"padding-right",a+"px");var l=n.querySelector(".top-panel__tfoot");l&&BX.hasClass(l,"fixed")&&BX.style(l,"padding-right",a+"px")}var c=document.querySelector('[data-entity="tabs"]');c&&BX.hasClass(c,"fixed")&&BX.style(c,"padding-right",a+"px");var d=document.querySelector(".objects-map");d&&BX.style(d,"padding-right",a+"px")}var h=BX.GetWindowScrollPos().scrollTop;h&&h>0&&BX.style(document.body,"top","-"+h+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}}))},this)))},showContacts:function(s){if(this.adjustContacts(),this.sPanel&&this.sPanelContent){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"},html:this.item.name}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},html:this.sPanelContent}));var e=this.sPanel.querySelector(".slide-panel__content");e&&$(e).scrollbar();var i=t.innerWidth-document.body.clientWidth;if(i>0){BX.style(document.body,"padding-right",i+"px");var a=document.querySelector(".page-bg");a&&BX.style(a,"margin-right",i+"px");var o=document.querySelector(".top-panel");if(o){BX.hasClass(o,"fixed")&&BX.style(o,"padding-right",i+"px");var n=o.querySelector(".top-panel__thead");n&&BX.hasClass(n,"fixed")&&BX.style(n,"padding-right",i+"px");var r=o.querySelector(".top-panel__tfoot");r&&BX.hasClass(r,"fixed")&&BX.style(r,"padding-right",i+"px")}var l=document.querySelector(".objects-detail-tabs-block");l&&BX.hasClass(l,"fixed")&&BX.style(l,"padding-right",i+"px");var c=document.querySelector(".objects-map");c&&BX.style(c,"padding-right",i+"px")}var d=BX.GetWindowScrollPos().scrollTop;d&&d>0&&BX.style(document.body,"top","-"+d+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}})),s.stopPropagation()}}})}(window);