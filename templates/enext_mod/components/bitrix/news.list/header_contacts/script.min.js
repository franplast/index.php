!function(s){"use strict";s.JCNewsListHeaderContacts||(s.JCNewsListHeaderContacts=function(s){this.visual={ID:""},this.item={address:"",timezone:"",workingHours:{},phone:{},email:{},skype:{}},this.sPanel=null,this.sPanelContent=null,this.obItem=null,this.errorCode=0,"object"==typeof s&&(this.visual=s.VISUAL,this.item.address=s.ITEM.ADDRESS,this.item.timezone=s.ITEM.TIMEZONE,this.item.workingHours=s.ITEM.WORKING_HOURS,this.item.phone=s.ITEM.PHONE.VALUE,this.item.phoneDescription=s.ITEM.PHONE.DESCRIPTION,this.item.email=s.ITEM.EMAIL.VALUE,this.item.emailDescription=s.ITEM.EMAIL.DESCRIPTION,this.item.skype=s.ITEM.SKYPE.VALUE,this.item.skypeDescription=s.ITEM.SKYPE.DESCRIPTION,BX.ready(BX.delegate(this.init,this)))},s.JCNewsListHeaderContacts.prototype={init:function(){this.sPanel=document.body.querySelector(".slide-panel"),this.obItem=BX(this.visual.ID),this.obItem||(this.errorCode=-1),0===this.errorCode&&(BX.bind(this.obItem,"click",BX.proxy(this.getWorkingHoursToday,this)),BX.addCustomEvent(this,"workingHoursTodayReceived",BX.proxy(this.adjustContacts,this)),BX.addCustomEvent(this,"contactsAdjusted",BX.proxy(this.showContacts,this)),this.sPanel&&(BX.bind(document,"click",BX.delegate(function(s){if(BX.hasClass(this.sPanel,"active")&&BX.findParent(s.target,{attrs:{id:this.visual.ID+"_contacts"}})&&BX.hasClass(s.target,"icon-arrow-down")){var t=BX.findParent(s.target,{attrs:{"data-entity":"working-hours-today"}});t&&BX.style(t,"display","none");var i=BX(this.visual.ID+"_contacts").querySelector('[data-entity="working-hours"]');i&&BX.style(i,"display",""),s.stopPropagation()}},this)),BX.bind(document,"click",BX.delegate(function(s){if(BX.hasClass(this.sPanel,"active")&&BX.findParent(s.target,{attrs:{id:this.visual.ID+"_contacts"}})&&BX.hasClass(s.target,"icon-arrow-up")){var t=BX.findParent(s.target,{attrs:{"data-entity":"working-hours"}});t&&BX.style(t,"display","none");var i=BX(this.visual.ID+"_contacts").querySelector('[data-entity="working-hours-today"]');i&&BX.style(i,"display",""),s.stopPropagation()}},this))))},getWorkingHoursToday:function(){BX.ajax({url:BX.message("HEADER_CONTACTS_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"workingHoursToday",timezone:this.item.timezone,workingHours:this.item.workingHours},onsuccess:BX.delegate(function(s){s.today&&(this.item.workingHoursToday=s.today),BX.onCustomEvent(this,"workingHoursTodayReceived")},this)})},adjustContacts:function(){var s="";if(this.item.address||this.item.workingHours||this.item.workingHoursToday||this.item.phone||this.item.email||this.item.skype){if(s+='<div class="slide-panel__contacts" id="'+this.visual.ID+'_contacts">',this.item.address&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-map-marker"></i></div>',s+='<div class="slide-panel__contacts-item__text">'+this.item.address+"</div>",s+="</div>",s+="</div>"),this.item.workingHoursToday)for(var t in this.item.workingHoursToday)this.item.workingHoursToday.hasOwnProperty(t)&&(s+='<div class="slide-panel__contacts-item" data-entity="working-hours-today">',s+='<div class="slide-panel__contacts-item__hours-today">',s+='<div class="slide-panel__contacts-item__today-container">',s+='<div class="slide-panel__contacts-item__today">',s+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>',s+='<span class="slide-panel__contacts-item__today-title">'+BX.message("HEADER_CONTACTS_ITEM_TODAY")+"</span>",this.item.workingHoursToday[t].STATUS&&(s+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.item.workingHoursToday[t].STATUS?"open":"closed")+'"></span>'),s+="</div>",s+="</div>",s+='<div class="slide-panel__contacts-item__hours-break">',s+='<div class="slide-panel__contacts-item__hours slide-panel__contacts-item__hours-first">',s+='<span class="slide-panel__contacts-item__hours-title">',this.item.workingHoursToday[t].WORK_START&&this.item.workingHoursToday[t].WORK_END?this.item.workingHoursToday[t].WORK_START!=this.item.workingHoursToday[t].WORK_END?s+=this.item.workingHoursToday[t].WORK_START+" - "+this.item.workingHoursToday[t].WORK_END:s+=BX.message("HEADER_CONTACTS_ITEM_24_HOURS"):s+=BX.message("HEADER_CONTACTS_ITEM_OFF"),s+="</span>",s+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-down"></i></span>',s+="</div>",this.item.workingHoursToday[t].WORK_START&&this.item.workingHoursToday[t].WORK_END&&this.item.workingHoursToday[t].WORK_START!=this.item.workingHoursToday[t].WORK_END&&this.item.workingHoursToday[t].BREAK_START&&this.item.workingHoursToday[t].BREAK_END&&this.item.workingHoursToday[t].BREAK_START!=this.item.workingHoursToday[t].BREAK_END&&(s+='<div class="slide-panel__contacts-item__break">',s+=BX.message("HEADER_CONTACTS_ITEM_BREAK")+" "+this.item.workingHoursToday[t].BREAK_START+" - "+this.item.workingHoursToday[t].BREAK_END,s+="</div>"),s+="</div>",s+="</div>",s+="</div>");if(this.item.workingHours){s+='<div class="slide-panel__contacts-item" data-entity="working-hours"'+(this.item.workingHoursToday?'style="display: none;"':"")+">";var i=0;for(var t in this.item.workingHours)this.item.workingHours.hasOwnProperty(t)&&(s+='<div class="slide-panel__contacts-item__hours-today">',s+='<div class="slide-panel__contacts-item__today-container">',s+='<div class="slide-panel__contacts-item__today">',0==i&&(s+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>'),s+='<span class="slide-panel__contacts-item__today-title">'+(this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(t)?BX.message("HEADER_CONTACTS_ITEM_TODAY"):this.item.workingHours[t].NAME)+"</span>",this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(t)&&this.item.workingHoursToday[t].STATUS&&(s+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.item.workingHoursToday[t].STATUS?"open":"closed")+'"></span>'),s+="</div>",s+="</div>",s+='<div class="slide-panel__contacts-item__hours-break">',s+='<div class="slide-panel__contacts-item__hours'+(0==i?" slide-panel__contacts-item__hours-first":"")+'">',s+='<span class="slide-panel__contacts-item__hours-title">',this.item.workingHours[t].WORK_START&&this.item.workingHours[t].WORK_END?this.item.workingHours[t].WORK_START!=this.item.workingHours[t].WORK_END?s+=this.item.workingHours[t].WORK_START+" - "+this.item.workingHours[t].WORK_END:s+=BX.message("HEADER_CONTACTS_ITEM_24_HOURS"):s+=BX.message("HEADER_CONTACTS_ITEM_OFF"),s+="</span>",this.item.workingHoursToday&&0==i&&(s+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-up"></i></span>'),s+="</div>",this.item.workingHours[t].WORK_START&&this.item.workingHours[t].WORK_END&&this.item.workingHours[t].WORK_START!=this.item.workingHours[t].WORK_END&&this.item.workingHours[t].BREAK_START&&this.item.workingHours[t].BREAK_END&&this.item.workingHours[t].BREAK_START!=this.item.workingHours[t].BREAK_END&&(s+='<div class="slide-panel__contacts-item__break">',s+=BX.message("HEADER_CONTACTS_ITEM_BREAK")+" "+this.item.workingHours[t].BREAK_START+" - "+this.item.workingHours[t].BREAK_END,s+="</div>"),s+="</div>",s+="</div>",i++);s+="</div>"}if(this.item.phone)for(var t in this.item.phone)this.item.phone.hasOwnProperty(t)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-phone"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__phone slide-panel__contacts-item__link" href="tel:'+this.item.phone[t].replace(/[^\d\+]/g,"")+'">'+this.item.phone[t]+"</a>",this.item.phoneDescription.hasOwnProperty(t)&&this.item.phoneDescription[t].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.item.phoneDescription[t]+"</span>"),s+="</div>",s+="</div>",s+="</div>");if(this.item.email)for(var t in this.item.email)this.item.email.hasOwnProperty(t)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-mail"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__link" href="mailto:'+this.item.email[t]+'">'+this.item.email[t]+"</a>",this.item.emailDescription.hasOwnProperty(t)&&this.item.emailDescription[t].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.item.emailDescription[t]+"</span>"),s+="</div>",s+="</div>",s+="</div>");if(this.item.skype)for(var t in this.item.skype)this.item.skype.hasOwnProperty(t)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="fa fa-skype"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__link" href="skype:'+this.item.skype[t]+'?chat">'+this.item.skype[t]+"</a>",this.item.skypeDescription.hasOwnProperty(t)&&this.item.skypeDescription[t].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.item.skypeDescription[t]+"</span>"),s+="</div>",s+="</div>",s+="</div>");s+="</div>",this.sPanelContent=s,BX.onCustomEvent(this,"contactsAdjusted")}},showContacts:function(){this.sPanel&&BX.ajax.post(BX.message("SITE_DIR")+"ajax/slide_panel.php",{action:"callback"},BX.delegate(function(t){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"},html:BX.message("HEADER_CONTACTS_TITLE")}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},html:this.sPanelContent+t}));var i=this.sPanel.querySelector(".slide-panel__content");i&&$(i).scrollbar();var e=s.innerWidth-document.body.clientWidth;if(e>0){BX.style(document.body,"padding-right",e+"px");var a=document.querySelector(".page-bg");a&&BX.style(a,"margin-right",e+"px");var o=document.querySelector(".top-panel");if(o){BX.hasClass(o,"fixed")&&BX.style(o,"padding-right",e+"px");var n=o.querySelector(".top-panel__thead");n&&BX.hasClass(n,"fixed")&&BX.style(n,"padding-right",e+"px");var r=o.querySelector(".top-panel__tfoot");r&&BX.hasClass(r,"fixed")&&BX.style(r,"padding-right",e+"px")}var l=document.querySelector(".catalog-section-panel");l&&BX.hasClass(l,"fixed")&&BX.style(l,"padding-right",e+"px");var c=document.querySelector('[data-entity="tabs"]');c&&BX.hasClass(c,"fixed")&&BX.style(c,"padding-right",e+"px");var d=document.querySelector(".objects-map");d&&BX.style(d,"padding-right",e+"px")}var _=BX.GetWindowScrollPos().scrollTop;_&&_>0&&BX.style(document.body,"top","-"+_+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}}))},this))}})}(window);