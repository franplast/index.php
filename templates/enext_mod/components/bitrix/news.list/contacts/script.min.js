!function(t){"use strict";t.JCNewsListContacts||(t.JCNewsListContacts=function(t){this.visual={ID:""},this.item={timezone:"",workingHours:{}},this.sPanel=null,this.obItem=null,this.errorCode=0,"object"==typeof t&&(this.visual=t.VISUAL,this.item.timezone=t.ITEM.TIMEZONE,this.item.workingHours=t.ITEM.WORKING_HOURS,BX.ready(BX.delegate(this.init,this)))},t.JCNewsListContacts.prototype={init:function(){if(this.obItem=BX(this.visual.ID),this.obItem||(this.errorCode=-1),0===this.errorCode){this.sPanel=document.body.querySelector(".slide-panel"),this.showWorkingHoursToday();var t=this.obItem.querySelector('[data-entity="callback"]');t&&BX.bind(t,"click",BX.proxy(this.showCallbackForm,this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.findParent(t.target,{attrs:{id:this.visual.ID}})&&BX.hasClass(t.target,"icon-arrow-down")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours-today"}});s&&BX.style(s,"display","none");var i=this.obItem.querySelector('[data-entity="working-hours-all"]');i&&BX.style(i,"display",""),t.stopPropagation()}},this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.findParent(t.target,{attrs:{id:this.visual.ID}})&&BX.hasClass(t.target,"icon-arrow-up")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours-all"}});s&&BX.style(s,"display","none");var i=this.obItem.querySelector('[data-entity="working-hours-today"]');i&&BX.style(i,"display",""),t.stopPropagation()}},this))}},showWorkingHoursToday:function(){var t=this.obItem.querySelector(".contacts-item-working-hours");t&&(t.innerHTML='<div class="contacts-item-icon"><i class="fa fa-spinner fa-pulse"></i></div><div class="contacts-item-text">'+BX.message("CONTACTS_LOADING")+"</div>",BX.removeClass(t,"contacts-item-working-hours-hidden"),BX.ajax({url:BX.message("CONTACTS_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"workingHoursToday",timezone:this.item.timezone,workingHours:this.item.workingHours},onsuccess:BX.delegate(function(s){var i="";if(s.today)for(var o in this.item.workingHoursToday=s.today,this.item.workingHoursToday)this.item.workingHoursToday.hasOwnProperty(o)&&(i+='<div class="contacts-item-working-hours-today" data-entity="working-hours-today">',i+='<div class="contacts-item-today-container">',i+='<div class="contacts-item-today">',i+='<span class="contacts-item-icon contacts-item-today-icon"><i class="icon-clock"></i></span>',i+='<span class="contacts-item-today-title">'+BX.message("CONTACTS_ITEM_TODAY")+"</span>",this.item.workingHoursToday[o].STATUS&&(i+='<span class="contacts-item-today-status contacts-item-today-status-'+("OPEN"==this.item.workingHoursToday[o].STATUS?"open":"closed")+'"></span>'),i+="</div>",i+="</div>",i+='<div class="contacts-item-hours-break">',i+='<div class="contacts-item-hours contacts-item-hours-first">',i+='<span class="contacts-item-hours-title">',this.item.workingHoursToday[o].WORK_START&&this.item.workingHoursToday[o].WORK_END?this.item.workingHoursToday[o].WORK_START!=this.item.workingHoursToday[o].WORK_END?i+=this.item.workingHoursToday[o].WORK_START+" - "+this.item.workingHoursToday[o].WORK_END:i+=BX.message("CONTACTS_ITEM_24_HOURS"):i+=BX.message("CONTACTS_ITEM_OFF"),i+="</span>",i+='<span class="contacts-item-hours-icon"><i class="icon-arrow-down"></i></span>',i+="</div>",this.item.workingHoursToday[o].WORK_START&&this.item.workingHoursToday[o].WORK_END&&this.item.workingHoursToday[o].WORK_START!=this.item.workingHoursToday[o].WORK_END&&this.item.workingHoursToday[o].BREAK_START&&this.item.workingHoursToday[o].BREAK_END&&this.item.workingHoursToday[o].BREAK_START!=this.item.workingHoursToday[o].BREAK_END&&(i+='<div class="contacts-item-break">',i+=BX.message("CONTACTS_ITEM_BREAK")+" "+this.item.workingHoursToday[o].BREAK_START+" - "+this.item.workingHoursToday[o].BREAK_END,i+="</div>"),i+="</div>",i+="</div>");if(this.item.workingHours){i+='<div class="contacts-item-working-hours-all" data-entity="working-hours-all"'+(this.item.workingHoursToday?'style="display: none;"':"")+">";var e=0;for(var o in this.item.workingHours)this.item.workingHours.hasOwnProperty(o)&&(i+='<div class="contacts-item-working-hours-today">',i+='<div class="contacts-item-today-container">',i+='<div class="contacts-item-today">',0==e&&(i+='<span class="contacts-item-icon contacts-item-today-icon"><i class="icon-clock"></i></span>'),i+='<span class="contacts-item-today-title">'+(this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(o)?BX.message("CONTACTS_ITEM_TODAY"):this.item.workingHours[o].NAME)+"</span>",this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(o)&&this.item.workingHoursToday[o].STATUS&&(i+='<span class="contacts-item-today-status contacts-item-today-status-'+("OPEN"==this.item.workingHoursToday[o].STATUS?"open":"closed")+'"></span>'),i+="</div>",i+="</div>",i+='<div class="contacts-item-hours-break">',i+='<div class="contacts-item-hours'+(0==e?" contacts-item-hours-first":"")+'">',i+='<span class="contacts-item-hours-title">',this.item.workingHours[o].WORK_START&&this.item.workingHours[o].WORK_END?this.item.workingHours[o].WORK_START!=this.item.workingHours[o].WORK_END?i+=this.item.workingHours[o].WORK_START+" - "+this.item.workingHours[o].WORK_END:i+=BX.message("CONTACTS_ITEM_24_HOURS"):i+=BX.message("CONTACTS_ITEM_OFF"),i+="</span>",this.item.workingHoursToday&&0==e&&(i+='<span class="contacts-item-hours-icon"><i class="icon-arrow-up"></i></span>'),i+="</div>",this.item.workingHours[o].WORK_START&&this.item.workingHours[o].WORK_END&&this.item.workingHours[o].WORK_START!=this.item.workingHours[o].WORK_END&&this.item.workingHours[o].BREAK_START&&this.item.workingHours[o].BREAK_END&&this.item.workingHours[o].BREAK_START!=this.item.workingHours[o].BREAK_END&&(i+='<div class="contacts-item-break">',i+=BX.message("CONTACTS_ITEM_BREAK")+" "+this.item.workingHours[o].BREAK_START+" - "+this.item.workingHours[o].BREAK_END,i+="</div>"),i+="</div>",i+="</div>",e++);i+="</div>"}t.innerHTML=i,0==i.length&&BX.addClass(t,"contacts-item-working-hours-hidden")},this)}))},showCallbackForm:function(){this.sPanel&&BX.ajax.post(BX.message("SITE_DIR")+"ajax/slide_panel.php",{action:"callback"},BX.delegate(function(s){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"}}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},html:s}));var i=this.sPanel.querySelector(".slide-panel__content");i&&$(i).scrollbar();var o=this.sPanel.querySelector(".slide-panel__title"),e=this.sPanel.querySelector(".slide-panel__form-title"),a=this.sPanel.querySelector('[type="submit"]');e&&(o.innerHTML=e.innerHTML,a&&(a.innerHTML=e.innerHTML),BX.remove(e));var r=t.innerWidth-document.body.clientWidth;if(r>0){BX.style(document.body,"padding-right",r+"px");var n=document.querySelector(".page-bg");n&&BX.style(n,"margin-right",r+"px");var c=document.querySelector(".top-panel");if(c){BX.hasClass(c,"fixed")&&BX.style(c,"padding-right",r+"px");var d=c.querySelector(".top-panel__thead");d&&BX.hasClass(d,"fixed")&&BX.style(d,"padding-right",r+"px");var l=c.querySelector(".top-panel__tfoot");l&&BX.hasClass(l,"fixed")&&BX.style(l,"padding-right",r+"px")}var h=document.querySelector(".catalog-section-panel");h&&BX.hasClass(h,"fixed")&&BX.style(h,"padding-right",r+"px");var m=document.querySelector('[data-entity="tabs"]');m&&BX.hasClass(m,"fixed")&&BX.style(m,"padding-right",r+"px");var u=document.querySelector(".objects-map");u&&BX.style(u,"padding-right",r+"px")}var T=BX.GetWindowScrollPos().scrollTop;T&&T>0&&BX.style(document.body,"top","-"+T+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}}))},this))}})}(window);