!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){var e=[];n(window).resize(function(){n(e).each(function(){n(this).moreMenu({undo:!0}).moreMenu(this.options)})}),n.fn.moreMenu=function(i){var o,t=n.extend({threshold:2,linkText:"...",undo:!1},i);return this.options=t,(o=n.inArray(this,e))>=0?e.splice(o,1):e.push(this),this.each(function(){var e,i,o,l,d,r=n(this),u=r.hasClass("horizontal-multilevel-menu"),a=r.find("> li"),f=a.first(),s=a.last(),h=r.find("li").length,m=Math.floor(f.offset().top),p=Math.floor(f.outerHeight(!0));function c(n){return Math.ceil(n.offset().top)>=m+p}if(c(s)&&h>t.threshold&&!t.undo&&r.is(":visible")){var v=n('<ul class="'+(u?"horizontal-multilevel-dropdown-menu":"catalog-menu-dropdown-menu")+' more-menu" data-entity="dropdown-menu"></ul>');for(d=h;d>1&&c(e=r.find("> li:last-child"));d--)e.appendTo(v);r.append('<li class="more" data-entity="dropdown"><a href="javascript:void(0)">'+t.linkText+"</a></li>"),c(i=r.find("> li.more"))&&r.find("> li:nth-last-child(2)").appendTo(v),v.children().each(function(n,e){v.prepend(e)}),i.append(v)}else if(t.undo&&r.find("ul.more-menu")){for(o=(l=r.find("ul.more-menu")).find("li").length,d=1;d<=o;d++)l.find("> li:first-child").appendTo(r);l.remove(),r.find("> li.more").remove(),r.find(u?".horizontal-multilevel-dropdown-menu":".catalog-menu-dropdown-menu").removeAttr("style")}})}});