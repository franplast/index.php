!function(t){"use strict";t.JCCatalogElementArticle||(t.JCCatalogElementArticle=function(t){if(this.productType=0,this.offersView="",this.config={useCatalog:!0,showQuantity:!0,showPrice:!0,showAbsent:!0,showOldPrice:!1,showPercent:!1,showSkuProps:!1,useCompare:!1,useSubscribe:!1,usePopup:!1,useMagnifier:!1,usePriceRanges:!1,basketAction:["BUY"],showSlider:!1,sliderInterval:5e3,useEnhancedEcommerce:!1,dataLayerName:"dataLayer",brandProperty:!1,alt:"",title:"",magnifierZoomPercent:200},this.checkQuantity=!1,this.skuItemCheckQuantity=!1,this.maxQuantity=0,this.skuItemMaxQuantity=0,this.maxPcQuantity=0,this.maxSqMQuantity=0,this.minQuantity=0,this.skuItemMinQuantity=0,this.minPcQuantity=0,this.minSqMQuantity=0,this.stepQuantity=1,this.skuItemStepQuantity=1,this.stepPcQuantity=1,this.stepSqMQuantity=.01,this.isDblQuantity=!1,this.skuItemIsDblQuantity=!1,this.canBuy=!0,this.skuItemCanBuy=!0,this.canSubscription=!0,this.currentIsSet=!1,this.updateViewedCount=!1,this.currentPriceMode="",this.skuItemCurrentPriceMode="",this.currentPrices=[],this.skuItemCurrentPrices=[],this.currentPriceSelected=0,this.skuItemCurrentPriceSelected=0,this.currentQuantityRanges=[],this.currentQuantityRangeSelected=0,this.currentMeasure=[],this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.visual={},this.basketMode="",this.product={checkQuantity:!1,maxQuantity:0,maxPcQuantity:0,maxSqMQuantity:0,stepQuantity:1,stepPcQuantity:1,stepSqMQuantity:.01,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:"",slider:{},sliderCount:0,useSlider:!1,sliderPict:[]},this.mess={},this.basketData={quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.delayData={delayPath:""},this.compareData={compareUrl:"",compareDeleteUrl:"",comparePath:""},this.object={id:0,name:"",address:"",timezone:"",workingHours:{},phone:{},email:{},skype:{},callbackForm:!1},this.skuItemObject={id:0,name:"",address:"",timezone:"",workingHours:{},phone:{},email:{},skype:{},callbackForm:!1},this.defaultPict={preview:null,detail:null},this.offers=[],this.offerNum=0,this.treeProps=[],this.selectedValues={},this.skuItemContainer=null,this.skuItemNum=0,this.skuItem=[],this.mouseTimer=null,this.isTouchDevice=BX.hasClass(document.documentElement,"bx-touch"),this.touch=null,this.slider={interval:null,progress:null,paused:null,controls:[]},this.obProduct=null,this.obQuantity=null,this.obSkuItemQuantity=null,this.obQuantityUp=null,this.obSkuItemQuantityUp=null,this.obQuantityDown=null,this.obSkuItemQuantityDown=null,this.obPcQuantity=null,this.obSkuItemPcQuantity=null,this.obPcQuantityUp=null,this.obSkuItemPcQuantityUp=null,this.obPcQuantityDown=null,this.obSkuItemPcQuantityDown=null,this.obSqMQuantity=null,this.obSkuItemSqMQuantity=null,this.obSqMQuantityUp=null,this.obSkuItemSqMQuantityUp=null,this.obSqMQuantityDown=null,this.obSkuItemSqMQuantityDown=null,this.obPrice=null,this.obPriceNotSet=null,this.obPriceCurrent=null,this.obSkuItemPriceCurrent=null,this.obPriceOld=null,this.obSkuItemPriceOld=null,this.obPriceDiscount=null,this.obSkuItemPriceDiscount=null,this.obPricePercent=null,this.obPricePercentVal=null,this.obTotalCost=null,this.obTotalCostVal=null,this.obTree=null,this.obPriceRanges=null,this.obBuyBtn=null,this.obSkuItemBuyBtn=null,this.obAddToBasketBtn=null,this.obSkuItemAddToBasketBtn=null,this.obBasketActions=null,this.obPartnersBtn=null,this.obPartners=null,this.obPartnersMess=null,this.obAskPrice=null,this.obNotAvail=null,this.obSubscribe=null,this.obSelectSku=null,this.obObjectBtn=null,this.obArticle={},this.obMainSkuProps=null,this.obBigSlider=null,this.obMeasure=null,this.obQuantityLimit={all:null,value:null},this.obQuantityLimitNotAvl={},this.obDelay=null,this.obSkuItemDelay=null,this.obCompare=null,this.obSkuItemCompare=null,this.obSkuItems=null,this.node={},this.magnify={enabled:!1,obBigImg:null,obBigSlider:null,height:0,width:0,timer:0},this.currentImg={id:0,src:"",width:0,height:0},this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.errorCode=0,"object"==typeof t){switch(this.params=t,this.initConfig(),this.params.MESS&&(this.mess=this.params.MESS),this.productType){case 0:case 1:case 2:this.initProductData();break;case 3:this.initOffersData();break;default:this.errorCode=-1}this.initBasketData(),this.initDelayData(),this.initCompareData(),this.initObjectData()}0===this.errorCode&&BX.ready(BX.delegate(this.init,this)),this.params={}},t.JCCatalogElementArticle.prototype={getEntity:function(t,s,i){return t&&s?(i=i||"",t.querySelector(i+'[data-entity="'+s+'"]')):null},getEntities:function(t,s,i){return t&&s?(i=i||"",t.querySelectorAll(i+'[data-entity="'+s+'"]')):{length:0}},init:function(){var s=0,i=0,e=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obBigSlider=BX(this.visual.BIG_SLIDER_ID),this.node.videoImageContainer=this.getEntity(this.obProduct,"videos-images-container"),this.node.sliderProgressBar=this.getEntity(this.obProduct,"slider-progress-bar"),this.node.sliderControlLeft=this.getEntity(this.obBigSlider,"slider-control-left"),this.node.sliderControlRight=this.getEntity(this.obBigSlider,"slider-control-right"),this.node.sliderMagnifier=this.getEntity(this.obBigSlider,"slider-magnifier"),this.obBigSlider&&this.node.videoImageContainer||(this.errorCode=-2),this.obSkuItems=BX(this.visual.SKU_ITEMS_ID),this.config.showPrice&&(this.obSkuItems?(BX.util.in_array("BUY",this.config.basketAction)&&(this.obBuyBtn=this.getEntities(this.obSkuItems,"buy")),BX.util.in_array("ADD",this.config.basketAction)&&(this.obAddToBasketBtn=this.getEntities(this.obSkuItems,"add")),this.obPartnersBtn=this.getEntities(this.obSkuItems,"partner-link"),this.obAskPrice=this.getEntities(this.obSkuItems,"ask-price"),this.obNotAvail=this.getEntities(this.obSkuItems,"not-available"),this.obSelectSku=BX(this.visual.SELECT_SKU_LINK)):(this.obPrice=BX(this.visual.PRICE_ID),this.obPriceNotSet=this.getEntity(this.obPrice,"price-current-not-set"),this.obPriceCurrent=this.getEntity(this.obPrice,"price-current"),this.obPriceMeasure=this.getEntity(this.obPrice,"price-measure"),!this.obPrice&&this.config.useCatalog?this.errorCode=-16:(this.config.showOldPrice&&(this.obPriceOld=BX(this.visual.OLD_PRICE_ID),this.obPriceDiscount=BX(this.visual.DISCOUNT_PRICE_ID),this.obPriceOld&&this.obPriceDiscount||(this.config.showOldPrice=!1)),this.config.showPercent&&(this.obPricePercent=BX(this.visual.DISCOUNT_PERCENT_ID),this.obPricePercentVal=this.getEntity(this.obPricePercent,"dsc-perc-val"),this.obPricePercent||(this.config.showPercent=!1))),this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&(BX.util.in_array("BUY",this.config.basketAction)&&(this.obBuyBtn=BX(this.visual.BUY_LINK)),BX.util.in_array("ADD",this.config.basketAction)&&(this.obAddToBasketBtn=BX(this.visual.ADD_BASKET_LINK))),this.obPartners=BX(this.visual.PARTNERS_ID),this.obPartnersMess=this.getEntity(this.obPartners,"partners-message"),this.obPartnersBtn=BX(this.visual.PARTNERS_LINK),this.obAskPrice=BX(this.visual.ASK_PRICE_LINK),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS))),this.config.showQuantity&&(this.obSkuItems?(this.obQuantity=this.getEntities(this.obSkuItems,"quantity"),this.obQuantityUp=this.getEntities(this.obSkuItems,"quantity-up"),this.obQuantityDown=this.getEntities(this.obSkuItems,"quantity-down"),this.obPcQuantity=this.getEntities(this.obSkuItems,"pc-quantity"),this.obPcQuantityUp=this.getEntities(this.obSkuItems,"pc-quantity-up"),this.obPcQuantityDown=this.getEntities(this.obSkuItems,"pc-quantity-down"),this.obSqMQuantity=this.getEntities(this.obSkuItems,"sq-m-quantity"),this.obSqMQuantityUp=this.getEntities(this.obSkuItems,"sq-m-quantity-up"),this.obSqMQuantityDown=this.getEntities(this.obSkuItems,"sq-m-quantity-down")):(this.node.quantity=this.getEntity(this.obProduct,"quantity-block"),this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID)),this.obPcQuantity=BX(this.visual.PC_QUANTITY_ID),this.visual.PC_QUANTITY_UP_ID&&(this.obPcQuantityUp=BX(this.visual.PC_QUANTITY_UP_ID)),this.visual.PC_QUANTITY_DOWN_ID&&(this.obPcQuantityDown=BX(this.visual.PC_QUANTITY_DOWN_ID)),this.obSqMQuantity=BX(this.visual.SQ_M_QUANTITY_ID),this.visual.SQ_M_QUANTITY_UP_ID&&(this.obSqMQuantityUp=BX(this.visual.SQ_M_QUANTITY_UP_ID)),this.visual.SQ_M_QUANTITY_DOWN_ID&&(this.obSqMQuantityDown=BX(this.visual.SQ_M_QUANTITY_DOWN_ID)),this.obTotalCost=BX(this.visual.TOTAL_COST_ID),this.obTotalCostVal=!!this.obTotalCost&&this.getEntity(this.obTotalCost,"total-cost"))),3!==this.productType||this.obSkuItems||(this.visual.TREE_ID&&(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256)),this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE)),this.visual.QUANTITY_LIMIT&&"N"!==this.config.showMaxQuantity&&(this.obQuantityLimit.all=BX(this.visual.QUANTITY_LIMIT),this.obQuantityLimit.all&&(this.obQuantityLimit.value=this.getEntity(this.obQuantityLimit.all,"quantity-limit-value"),this.obQuantityLimit.value||(this.obQuantityLimit.all=null))),this.visual.QUANTITY_LIMIT_NOT_AVAILABLE&&"N"!==this.config.showMaxQuantity&&(this.obQuantityLimitNotAvl.all=BX(this.visual.QUANTITY_LIMIT_NOT_AVAILABLE)),this.config.usePriceRanges&&(this.obPriceRanges=this.getEntity(this.obProduct,"price-ranges-block"))),this.visual.ARTICLE_ID&&(this.obArticle.all=BX(this.visual.ARTICLE_ID),this.obArticle.all&&(this.obArticle.value=this.getEntity(this.obArticle.all,"article-value"))),this.config.showSkuProps&&(this.obMainSkuProps=BX(this.visual.DISPLAY_MAIN_PROP_DIV)),this.obSkuItems?(this.obDelay=this.getEntities(this.obSkuItems,"delay"),this.config.useCompare&&(this.obCompare=this.getEntities(this.obSkuItems,"compare"))):(this.obDelay=BX(this.visual.DELAY_LINK),this.config.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK))),this.config.useSubscribe&&(this.obSubscribe=BX(this.visual.SUBSCRIBE_LINK)),this.initPopup(),this.obPayBlock=this.obProduct.querySelector(".product-item-detail-pay-block"),this.obPayBlock&&(this.payBlockMoved=!1,this.checkTopPayBlockResize(),BX.bind(t,"resize",BX.proxy(this.checkTopPayBlockResize,this))),this.obObjectBtn=this.obProduct.querySelector(".product-item-detail-object-btn"),this.obSkuItems&&(this.obObjectsBtn=this.getEntities(this.obSkuItems,"object")),0===this.errorCode){if(this.config.showSlider&&!this.isTouchDevice&&(BX.bind(this.obBigSlider,"mouseenter",BX.proxy(this.stopSlider,this)),BX.bind(this.obBigSlider,"mouseleave",BX.proxy(this.cycleSlider,this))),this.isTouchDevice&&(BX.bind(this.node.videoImageContainer,"touchstart",BX.proxy(this.touchStartEvent,this)),BX.bind(this.node.videoImageContainer,"touchend",BX.proxy(this.touchEndEvent,this)),BX.bind(this.node.videoImageContainer,"touchcancel",BX.proxy(this.touchEndEvent,this))),BX.bind(this.node.sliderControlLeft,"click",BX.proxy(this.slidePrev,this)),BX.bind(this.node.sliderControlRight,"click",BX.proxy(this.slideNext,this)),this.config.showQuantity)if(this.obSkuItems){if(this.obQuantityUp)for(var s in this.obQuantityUp)this.obQuantityUp.hasOwnProperty(s)&&BX.type.isDomNode(this.obQuantityUp[s])&&BX.bind(this.obQuantityUp[s],"click",BX.delegate(this.quantityUp,this));if(this.obQuantityDown)for(var s in this.obQuantityDown)this.obQuantityDown.hasOwnProperty(s)&&BX.type.isDomNode(this.obQuantityDown[s])&&BX.bind(this.obQuantityDown[s],"click",BX.delegate(this.quantityDown,this));if(this.obQuantity)for(var s in this.obQuantity)this.obQuantity.hasOwnProperty(s)&&BX.type.isDomNode(this.obQuantity[s])&&BX.bind(this.obQuantity[s],"change",BX.delegate(this.quantityChange,this));if(this.obPcQuantityUp)for(var s in this.obPcQuantityUp)this.obPcQuantityUp.hasOwnProperty(s)&&BX.type.isDomNode(this.obPcQuantityUp[s])&&BX.bind(this.obPcQuantityUp[s],"click",BX.delegate(this.quantityUp,this));if(this.obPcQuantityDown)for(var s in this.obPcQuantityDown)this.obPcQuantityDown.hasOwnProperty(s)&&BX.type.isDomNode(this.obPcQuantityDown[s])&&BX.bind(this.obPcQuantityDown[s],"click",BX.delegate(this.quantityDown,this));if(this.obPcQuantity)for(var s in this.obPcQuantity)this.obPcQuantity.hasOwnProperty(s)&&BX.type.isDomNode(this.obPcQuantity[s])&&BX.bind(this.obPcQuantity[s],"change",BX.delegate(this.pcQuantityChange,this));if(this.obSqMQuantityUp)for(var s in this.obSqMQuantityUp)this.obSqMQuantityUp.hasOwnProperty(s)&&BX.type.isDomNode(this.obSqMQuantityUp[s])&&BX.bind(this.obSqMQuantityUp[s],"click",BX.delegate(this.quantityUp,this));if(this.obSqMQuantityDown)for(var s in this.obSqMQuantityDown)this.obSqMQuantityDown.hasOwnProperty(s)&&BX.type.isDomNode(this.obSqMQuantityDown[s])&&BX.bind(this.obSqMQuantityDown[s],"click",BX.delegate(this.quantityDown,this));if(this.obSqMQuantity)for(var s in this.obSqMQuantity)this.obSqMQuantity.hasOwnProperty(s)&&BX.type.isDomNode(this.obSqMQuantity[s])&&BX.bind(this.obSqMQuantity[s],"change",BX.delegate(this.sqMQuantityChange,this))}else this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.quantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.quantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.quantityChange,this)),this.obPcQuantityUp&&BX.bind(this.obPcQuantityUp,"click",BX.delegate(this.quantityUp,this)),this.obPcQuantityDown&&BX.bind(this.obPcQuantityDown,"click",BX.delegate(this.quantityDown,this)),this.obPcQuantity&&BX.bind(this.obPcQuantity,"change",BX.delegate(this.pcQuantityChange,this)),this.obSqMQuantityUp&&BX.bind(this.obSqMQuantityUp,"click",BX.delegate(this.quantityUp,this)),this.obSqMQuantityDown&&BX.bind(this.obSqMQuantityDown,"click",BX.delegate(this.quantityDown,this)),this.obSqMQuantity&&BX.bind(this.obSqMQuantity,"change",BX.delegate(this.sqMQuantityChange,this));switch(this.productType){case 0:case 1:case 2:if(this.product.useSlider){for(this.product.slider={ID:this.visual.SLIDER_CONT_ID,CONT:BX(this.visual.SLIDER_CONT_ID),COUNT:this.product.sliderCount},this.product.slider.ITEMS=this.getEntities(this.product.slider.CONT,"slider-control"),i=0;i<this.product.slider.ITEMS.length;i++)BX.bind(this.product.slider.ITEMS[i],"click",BX.delegate(this.selectSliderImg,this));s=0;for(i=0;i<this.product.sliderPict.length;i++)this.product.sliderPict[s].VALUE&&""!=this.product.sliderPict[s].VALUE&&s++;this.setCurrentImg(this.product.sliderPict[s],!0,!0),this.checkSliderControls(this.product.sliderCount),this.product.slider.ITEMS.length>1&&this.initSlider()}this.checkQuantityControls();break;case 3:if(!this.obSkuItems)for(e=this.obTree.querySelectorAll("li"),s=0;s<e.length;s++)BX.bind(e[s],"click",BX.delegate(this.selectOfferProp,this));for(s=0;s<this.offers.length;s++)if(this.offers[s].SLIDER_COUNT=parseInt(this.offers[s].SLIDER_COUNT,10)||0,0===this.offers[s].SLIDER_COUNT)this.slider.controls[s]={ID:"",COUNT:this.offers[s].SLIDER_COUNT,ITEMS:[]};else{for(i=0;i<this.offers[s].SLIDER.length;i++)this.offers[s].SLIDER[i].WIDTH=parseInt(this.offers[s].SLIDER[i].WIDTH,10),this.offers[s].SLIDER[i].HEIGHT=parseInt(this.offers[s].SLIDER[i].HEIGHT,10);for(this.slider.controls[s]={ID:this.visual.SLIDER_CONT_OF_ID+this.offers[s].ID,OFFER_ID:this.offers[s].ID,CONT:BX(this.visual.SLIDER_CONT_OF_ID+this.offers[s].ID),COUNT:this.offers[s].SLIDER_COUNT},this.slider.controls[s].ITEMS=this.getEntities(this.slider.controls[s].CONT,"slider-control"),i=0;i<this.slider.controls[s].ITEMS.length;i++)BX.bind(this.slider.controls[s].ITEMS[i],"click",BX.delegate(this.selectSliderImg,this))}if(this.obSkuItems){for(this.checkSliderControls(this.offers[this.offerNum].SLIDER_COUNT),this.slider.controls[this.offerNum].ID?this.product.slider=this.slider.controls[this.offerNum]:this.product.slider={},s=0,i=0;i<this.offers[this.offerNum].SLIDER.length;i++)this.offers[this.offerNum].SLIDER[i].VALUE&&""!=this.offers[this.offerNum].SLIDER[i].VALUE&&s++;this.setCurrentImg(this.offers[this.offerNum].SLIDER[s],!0,!0),this.offers[this.offerNum].SLIDER_COUNT>1&&this.initSlider()}else this.setCurrent()}if(this.sPanel=document.body.querySelector(".slide-panel"),this.obSkuItems){if(this.obBuyBtn)for(var s in this.obBuyBtn)this.obBuyBtn.hasOwnProperty(s)&&BX.type.isDomNode(this.obBuyBtn[s])&&BX.bind(this.obBuyBtn[s],"click",BX.proxy(this.buyBasket,this));if(this.obAddToBasketBtn)for(var s in this.obAddToBasketBtn)this.obAddToBasketBtn.hasOwnProperty(s)&&BX.type.isDomNode(this.obAddToBasketBtn[s])&&BX.bind(this.obAddToBasketBtn[s],"click",BX.proxy(this.add2Basket,this));if(this.obPartnersBtn)for(var s in this.obPartnersBtn)this.obPartnersBtn.hasOwnProperty(s)&&BX.type.isDomNode(this.obPartnersBtn[s])&&BX.bind(this.obPartnersBtn[s],"click",BX.proxy(this.partnerSiteRedirect,this));if(this.obAskPrice)for(var s in this.obAskPrice)this.obAskPrice.hasOwnProperty(s)&&BX.type.isDomNode(this.obAskPrice[s])&&BX.bind(this.obAskPrice[s],"click",BX.proxy(this.sPanelForm,this));if(this.obNotAvail)for(var s in this.obNotAvail)this.obNotAvail.hasOwnProperty(s)&&BX.type.isDomNode(this.obNotAvail[s])&&BX.bind(this.obNotAvail[s],"click",BX.proxy(this.sPanelForm,this));if(this.obDelay)for(var s in this.obDelay)this.obDelay.hasOwnProperty(s)&&BX.type.isDomNode(this.obDelay[s])&&BX.bind(this.obDelay[s],"click",BX.proxy(this.delay,this));if(this.obCompare)for(var s in this.obCompare)this.obCompare.hasOwnProperty(s)&&BX.type.isDomNode(this.obCompare[s])&&BX.bind(this.obCompare[s],"click",BX.proxy(this.compare,this));this.obSelectSku&&BX.bind(this.obSelectSku,"click",BX.proxy(this.scrollToSkuItems,this))}else this.obBuyBtn&&BX.bind(this.obBuyBtn,"click",BX.proxy(this.buyBasket,this)),this.obAddToBasketBtn&&BX.bind(this.obAddToBasketBtn,"click",BX.proxy(this.add2Basket,this)),this.obPartnersBtn&&BX.bind(this.obPartnersBtn,"click",BX.proxy(this.partnerSiteRedirect,this)),this.obAskPrice&&BX.bind(this.obAskPrice,"click",BX.proxy(this.sPanelForm,this)),this.obNotAvail&&BX.bind(this.obNotAvail,"click",BX.proxy(this.sPanelForm,this)),this.obDelay&&BX.bind(this.obDelay,"click",BX.proxy(this.delay,this)),this.obCompare&&BX.bind(this.obCompare,"click",BX.proxy(this.compare,this));if(BX.addCustomEvent(this,"sPanelFormRequest",BX.proxy(this.sPanelFormRequest,this)),this.obCompare&&BX.addCustomEvent("onCatalogDeleteCompare",BX.proxy(this.checkDeletedCompare,this)),this.obObjectBtn&&BX.bind(this.obObjectBtn,"click",BX.proxy(this.object.callbackForm?this.objectContactsForm:this.objectContacts,this)),BX.addCustomEvent(this,"getObjectWorkingHoursToday",BX.proxy(this.getObjectWorkingHoursToday,this)),BX.addCustomEvent(this,"objectWorkingHoursTodayReceived",BX.proxy(this.adjustObjectContacts,this)),BX.addCustomEvent(this,"objectContactsAdjusted",BX.proxy(this.object.callbackForm?this.objectContactsFormRequest:this.objectContactsRequest,this)),this.obSkuItems&&("OBJECTS"==this.offersView&&this.showObjectWorkingHoursToday(),this.obObjectsBtn))for(var s in this.obObjectsBtn)this.obObjectsBtn.hasOwnProperty(s)&&BX.type.isDomNode(this.obObjectsBtn[s])&&BX.bind(this.obObjectsBtn[s],"click",BX.delegate(function(t){this.checkCurrentSkuItem(BX.proxy_context),this.skuItemObject.callbackForm?this.objectContactsForm(t):this.objectContacts(t)},this));BX.addCustomEvent(this,"adjustSkuItemObjectContacts",BX.proxy(this.adjustSkuItemObjectContacts,this)),BX.addCustomEvent(this,"skuItemObjectContactsAdjusted",BX.delegate(function(t){this.skuItemObject.callbackForm?this.objectContactsFormRequest(t):this.objectContactsRequest(t)},this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.hasClass(this.sPanel,"active")&&BX.findParent(t.target,{attrs:{id:this.visual.ID+(this.obSkuItems&&"OBJECTS"==this.offersView?"_"+this.skuItem.ID:"")+"_contacts"}})&&BX.hasClass(t.target,"icon-arrow-down")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours-today"}});s&&BX.style(s,"display","none");var i=BX(this.visual.ID+(this.obSkuItems&&"OBJECTS"==this.offersView?"_"+this.skuItem.ID:"")+"_contacts").querySelector('[data-entity="working-hours"]');i&&BX.style(i,"display",""),t.stopPropagation()}},this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.hasClass(this.sPanel,"active")&&BX.findParent(t.target,{attrs:{id:this.visual.ID+(this.obSkuItems&&"OBJECTS"==this.offersView?"_"+this.skuItem.ID:"")+"_contacts"}})&&BX.hasClass(t.target,"icon-arrow-up")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours"}});s&&BX.style(s,"display","none");var i=BX(this.visual.ID+(this.obSkuItems&&"OBJECTS"==this.offersView?"_"+this.skuItem.ID:"")+"_contacts").querySelector('[data-entity="working-hours-today"]');i&&BX.style(i,"display",""),t.stopPropagation()}},this))}},initConfig:function(){this.productType=parseInt(this.params.PRODUCT_TYPE,10),this.offersView=this.params.OFFERS_VIEW,"undefined"!==this.params.CONFIG.USE_CATALOG&&BX.type.isBoolean(this.params.CONFIG.USE_CATALOG)&&(this.config.useCatalog=this.params.CONFIG.USE_CATALOG),this.config.showQuantity=this.params.CONFIG.SHOW_QUANTITY,this.config.showPrice=this.params.CONFIG.SHOW_PRICE,this.config.showPercent=this.params.CONFIG.SHOW_DISCOUNT_PERCENT,this.config.showOldPrice=this.params.CONFIG.SHOW_OLD_PRICE,this.config.showSkuProps=this.params.CONFIG.SHOW_SKU_PROPS,this.config.useCompare=this.params.CONFIG.DISPLAY_COMPARE,this.config.useSubscribe=this.params.CONFIG.USE_SUBSCRIBE,this.config.showMaxQuantity=this.params.CONFIG.SHOW_MAX_QUANTITY,this.config.relativeQuantityFactor=parseInt(this.params.CONFIG.RELATIVE_QUANTITY_FACTOR),this.config.usePriceRanges=this.params.CONFIG.USE_PRICE_COUNT,this.params.CONFIG.MAIN_PICTURE_MODE&&(this.config.usePopup=BX.util.in_array("POPUP",this.params.CONFIG.MAIN_PICTURE_MODE),this.config.useMagnifier=BX.util.in_array("MAGNIFIER",this.params.CONFIG.MAIN_PICTURE_MODE)),this.params.CONFIG.ADD_TO_BASKET_ACTION&&(this.config.basketAction=this.params.CONFIG.ADD_TO_BASKET_ACTION),this.config.showSlider="Y"===this.params.CONFIG.SHOW_SLIDER,this.config.showSlider&&!this.isTouchDevice?this.config.sliderInterval=parseInt(this.params.CONFIG.SLIDER_INTERVAL)||5e3:this.config.sliderInterval=!1,this.config.useEnhancedEcommerce="Y"===this.params.CONFIG.USE_ENHANCED_ECOMMERCE,this.config.dataLayerName=this.params.CONFIG.DATA_LAYER_NAME,this.config.brandProperty=this.params.CONFIG.BRAND_PROPERTY,this.config.alt=this.params.CONFIG.ALT||"",this.config.title=this.params.CONFIG.TITLE||"",this.config.magnifierZoomPercent=parseInt(this.params.CONFIG.MAGNIFIER_ZOOM_PERCENT)||200,this.params.VISUAL&&"object"==typeof this.params.VISUAL&&this.params.VISUAL.ID?this.visual=this.params.VISUAL:this.errorCode=-1},initProductData:function(){var t=0,s=0;if(this.params.PRODUCT&&"object"==typeof this.params.PRODUCT){if(this.config.showPrice&&(this.currentPriceMode=this.params.PRODUCT.ITEM_PRICE_MODE,this.currentPrices=this.params.PRODUCT.ITEM_PRICES,this.currentPriceSelected=this.params.PRODUCT.ITEM_PRICE_SELECTED,this.currentQuantityRanges=this.params.PRODUCT.ITEM_QUANTITY_RANGES,this.currentQuantityRangeSelected=this.params.PRODUCT.ITEM_QUANTITY_RANGE_SELECTED),this.config.showQuantity&&(this.currentMeasure=this.params.PRODUCT.ITEM_MEASURE,this.product.checkQuantity=this.params.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=this.params.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(this.params.PRODUCT.MAX_QUANTITY):parseInt(this.params.PRODUCT.MAX_QUANTITY,10),this.product.maxPcQuantity=parseInt(this.params.PRODUCT.PC_MAX_QUANTITY,10),this.product.maxSqMQuantity=parseFloat(this.params.PRODUCT.SQ_M_MAX_QUANTITY)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(this.params.PRODUCT.STEP_QUANTITY):parseInt(this.params.PRODUCT.STEP_QUANTITY,10),this.product.stepPcQuantity=parseInt(this.params.PRODUCT.PC_STEP_QUANTITY,10),this.product.stepSqMQuantity=parseFloat(this.params.PRODUCT.SQ_M_STEP_QUANTITY),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.stepQuantity=this.product.stepQuantity,this.stepPcQuantity=this.product.stepPcQuantity,this.stepSqMQuantity=this.product.stepSqMQuantity,this.maxQuantity=this.product.maxQuantity,this.maxPcQuantity=this.product.maxPcQuantity,this.maxSqMQuantity=this.product.maxSqMQuantity,this.minQuantity="Q"===this.currentPriceMode?parseFloat(this.currentPrices[this.currentPriceSelected].MIN_QUANTITY):this.stepQuantity,this.minPcQuantity=this.stepPcQuantity,this.minSqMQuantity="Q"===this.currentPriceMode?parseFloat(this.currentPrices[this.currentPriceSelected].SQ_M_MIN_QUANTITY):this.stepSqMQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor),this.stepSqMQuantity=Math.round(this.stepSqMQuantity*this.precisionFactor)/this.precisionFactor),this.product.canBuy=this.params.PRODUCT.CAN_BUY,this.canSubscription=this.product.canSubscription=this.params.PRODUCT.SUBSCRIPTION,this.product.name=this.params.PRODUCT.NAME,this.product.pict=this.params.PRODUCT.PICT,this.product.id=this.params.PRODUCT.ID,this.product.category=this.params.PRODUCT.CATEGORY,this.params.PRODUCT.ADD_URL&&(this.product.addUrl=this.params.PRODUCT.ADD_URL),this.params.PRODUCT.BUY_URL&&(this.product.buyUrl=this.params.PRODUCT.BUY_URL),this.params.PRODUCT.SLIDER_COUNT&&(this.product.sliderCount=parseInt(this.params.PRODUCT.SLIDER_COUNT,10)||0,this.product.sliderCount>0&&this.params.PRODUCT.SLIDER.length)){for(s=0;s<this.params.PRODUCT.SLIDER.length;s++)this.product.useSlider=!0,this.params.PRODUCT.SLIDER[s].WIDTH=parseInt(this.params.PRODUCT.SLIDER[s].WIDTH,10),this.params.PRODUCT.SLIDER[s].HEIGHT=parseInt(this.params.PRODUCT.SLIDER[s].HEIGHT,10);for(this.product.sliderPict=this.params.PRODUCT.SLIDER,t=0,s=0;s<this.product.sliderPict.length;s++)this.product.sliderPict[t].VALUE&&""!=this.product.sliderPict[t].VALUE&&t++;this.setCurrentImg(this.product.sliderPict[t],!1)}this.currentIsSet=!0}else this.errorCode=-1},initOffersData:function(){this.params.OFFERS&&BX.type.isArray(this.params.OFFERS)?(this.offers=this.params.OFFERS,this.offerNum=0,this.params.OFFER_SELECTED&&(this.offerNum=parseInt(this.params.OFFER_SELECTED,10)||0),this.params.TREE_PROPS&&(this.treeProps=this.params.TREE_PROPS),this.params.DEFAULT_PICTURE&&(this.defaultPict.preview=this.params.DEFAULT_PICTURE.PREVIEW_PICTURE,this.defaultPict.detail=this.params.DEFAULT_PICTURE.DETAIL_PICTURE),this.params.PRODUCT&&"object"==typeof this.params.PRODUCT&&(this.product.id=parseInt(this.params.PRODUCT.ID,10),this.product.name=this.params.PRODUCT.NAME,this.product.category=this.params.PRODUCT.CATEGORY)):this.errorCode=-1},initBasketData:function(){this.params.BASKET&&"object"==typeof this.params.BASKET&&(this.params.BASKET.QUANTITY&&(this.basketData.quantity=this.params.BASKET.QUANTITY),this.params.BASKET.PROPS&&(this.basketData.props=this.params.BASKET.PROPS),this.params.BASKET.BASKET_URL&&(this.basketData.basketUrl=this.params.BASKET.BASKET_URL),3===this.productType&&this.params.BASKET.SKU_PROPS&&(this.basketData.sku_props=this.params.BASKET.SKU_PROPS),this.params.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=this.params.BASKET.ADD_URL_TEMPLATE),this.params.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=this.params.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024))},initDelayData:function(){this.params.DELAY&&"object"==typeof this.params.DELAY&&this.params.DELAY.DELAY_PATH&&(this.delayData.delayPath=this.params.DELAY.DELAY_PATH)},initCompareData:function(){this.config.useCompare&&(this.params.COMPARE&&"object"==typeof this.params.COMPARE?(this.params.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=this.params.COMPARE.COMPARE_PATH),this.params.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=this.params.COMPARE.COMPARE_URL_TEMPLATE:this.config.useCompare=!1,this.params.COMPARE.COMPARE_DELETE_URL_TEMPLATE?this.compareData.compareDeleteUrl=this.params.COMPARE.COMPARE_DELETE_URL_TEMPLATE:this.config.useCompare=!1):this.config.useCompare=!1)},initObjectData:function(){this.params.OBJECT&&"object"==typeof this.params.OBJECT&&(this.params.OBJECT.ID&&(this.object.id=this.params.OBJECT.ID),this.params.OBJECT.NAME&&(this.object.name=this.params.OBJECT.NAME),this.params.OBJECT.ADDRESS&&(this.object.address=this.params.OBJECT.ADDRESS),this.params.OBJECT.TIMEZONE&&(this.object.timezone=this.params.OBJECT.TIMEZONE),this.params.OBJECT.WORKING_HOURS&&(this.object.workingHours=this.params.OBJECT.WORKING_HOURS),this.params.OBJECT.PHONE&&(this.object.phone=this.params.OBJECT.PHONE.VALUE,this.object.phoneDescription=this.params.OBJECT.PHONE.DESCRIPTION),this.params.OBJECT.EMAIL&&(this.object.email=this.params.OBJECT.EMAIL.VALUE,this.object.emailDescription=this.params.OBJECT.EMAIL.DESCRIPTION),this.params.OBJECT.SKYPE&&(this.object.skype=this.params.OBJECT.SKYPE.VALUE,this.object.skypeDescription=this.params.OBJECT.SKYPE.DESCRIPTION),this.params.OBJECT.CALLBACK_FORM&&(this.object.callbackForm=this.params.OBJECT.CALLBACK_FORM))},initSlider:function(){this.node.sliderProgressBar&&(this.slider.progress?this.resetProgress():this.slider.progress=new BX.easing({transition:BX.easing.transitions.linear,step:BX.delegate(function(t){this.node.sliderProgressBar.style.width=t.width/10+"%"},this)})),this.cycleSlider()},setAnalyticsDataLayer:function(s){if(this.config.useEnhancedEcommerce&&this.config.dataLayerName){var i,e,a,o,n,r,h={},u={},c=[];switch(this.productType){case 0:case 1:case 2:h={id:this.product.id,name:this.product.name,price:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].PRICE,category:this.product.category,brand:BX.type.isArray(this.config.brandProperty)?this.config.brandProperty.join("/"):this.config.brandProperty};break;case 3:for(i in this.offers[this.obSkuItems?this.skuItemNum:this.offerNum].TREE)if(this.offers[this.obSkuItems?this.skuItemNum:this.offerNum].TREE.hasOwnProperty(i))for(e in o=i.substring(5),n=this.offers[this.obSkuItems?this.skuItemNum:this.offerNum].TREE[i],this.treeProps)if(this.treeProps.hasOwnProperty(e)&&this.treeProps[e].ID==o)for(a in this.treeProps[e].VALUES)if((r=this.treeProps[e].VALUES[a]).ID==n){c.push(r.NAME);break}h={id:this.offers[this.obSkuItems?this.skuItemNum:this.offerNum].ID,name:this.offers[this.obSkuItems?this.skuItemNum:this.offerNum].NAME,price:this.obSkuItems?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected]&&this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].PRICE:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].PRICE,category:this.product.category,brand:BX.type.isArray(this.config.brandProperty)?this.config.brandProperty.join("/"):this.config.brandProperty,variant:c.join("/")}}switch(s){case"addToCart":u={event:"addToCart",ecommerce:{currencyCode:this.obSkuItems?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected]&&this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].CURRENCY||"":this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].CURRENCY||"",add:{products:[{name:h.name||"",id:h.id||"",price:h.price||0,brand:h.brand||"",category:h.category||"",variant:h.variant||""}]}}},this.config.showQuantity?!this.obSkuItems&&this.obQuantity&&!this.obPcQuantity&&!this.obSqMQuantity||this.obSkuItems&&this.obSkuItemQuantity&&!this.obSkuItemPcQuantity&&!this.obSkuItemSqMQuantity?u.ecommerce.add.products[0].quantity=this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value:(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity)&&(this.obSkuItems?u.ecommerce.add.products[0].quantity=this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE?this.obSkuItemPcQuantity.value:this.obSkuItemSqMQuantity.value:"pc. 1"==this.currentMeasure.SYMBOL_INTL||"m2"==this.currentMeasure.SYMBOL_INTL?u.ecommerce.add.products[0].quantity=this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value:u.ecommerce.add.products[0].quantity=this.obQuantity.value):this.obSkuItems?u.ecommerce.add.products[0].quantity=this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected]?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].MIN_QUANTITY:"":u.ecommerce.add.products[0].quantity=this.currentPrices[this.currentPriceSelected]?this.currentPrices[this.currentPriceSelected].MIN_QUANTITY:""}t[this.config.dataLayerName]=t[this.config.dataLayerName]||[],t[this.config.dataLayerName].push(u)}},checkTouch:function(t){return!(!t||!t.changedTouches)&&t.changedTouches[0].identifier===this.touch.identifier},touchStartEvent:function(t){1==t.touches.length&&(this.touch=t.changedTouches[0])},touchEndEvent:function(t){if(this.checkTouch(t)){var s=this.touch.pageX-t.changedTouches[0].pageX,i=this.touch.pageY-t.changedTouches[0].pageY;Math.abs(s)>=Math.abs(i)+10&&(s>0&&this.slideNext(),s<0&&this.slidePrev())}},cycleSlider:function(t){if(t||(this.slider.paused=!1),this.slider.interval&&clearInterval(this.slider.interval),this.config.sliderInterval&&!this.slider.paused)if(this.slider.progress){this.slider.progress.stop();var s=parseInt(this.node.sliderProgressBar.style.width);this.slider.progress.options.duration=this.config.sliderInterval*(100-s)/100,this.slider.progress.options.start={width:10*s},this.slider.progress.options.finish={width:1e3},this.slider.progress.options.complete=BX.delegate(function(){this.slider.interval=!0,this.slideNext()},this),this.slider.progress.animate()}else this.slider.interval=setInterval(BX.proxy(this.slideNext,this),this.config.sliderInterval)},stopSlider:function(t){if(t||(this.slider.paused=!0),this.slider.interval&&(this.slider.interval=clearInterval(this.slider.interval)),this.slider.progress){this.slider.progress.stop();var s=parseInt(this.node.sliderProgressBar.style.width);this.slider.progress.options.duration=this.config.sliderInterval*s/200,this.slider.progress.options.start={width:10*s},this.slider.progress.options.finish={width:0},this.slider.progress.options.complete=null,this.slider.progress.animate()}},resetProgress:function(){this.slider.progress&&this.slider.progress.stop(),this.node.sliderProgressBar.style.width=0},slideNext:function(){return this.slide("next")},slidePrev:function(){return this.slide("prev")},slide:function(t){if(this.product.slider&&this.product.slider.CONT){var s=this.getEntity(this.product.slider.CONT,"slider-control",".active"),i=this.getItemForDirection(t,s);BX.removeClass(s,"active"),this.selectSliderImg(i),this.slider.interval&&this.cycleSlider()}},getItemForDirection:function(t,s){var i=(this.getItemIndex(s)+("prev"===t?-1:1))%this.product.slider.COUNT;return this.eq(this.product.slider.ITEMS,i)},getItemIndex:function(t){return BX.util.array_values(this.product.slider.ITEMS).indexOf(t)},eq:function(t,s){var i=t.length,e=+s+(s<0?i:0);return e>=0&&e<i?t[e]:{}},checkTopPayBlockResize:function(){var s=this.obProduct.querySelector(".product-item-detail-blocks"),i=this.obProduct.querySelector(".product-item-detail-ghost-top");t.innerWidth<992?!this.payBlockMoved&&s&&(this.payBlockMoved=!0,BX.prepend(this.obPayBlock,s)):this.payBlockMoved&&i&&(this.payBlockMoved=!1,BX.insertAfter(this.obPayBlock,i))},initPopup:function(){this.config.usePopup&&(this.node.videoImageContainer.style.cursor="zoom-in",BX.bind(this.node.videoImageContainer,"click",BX.delegate(this.toggleMainPictPopup,this)),BX.bind(this.node.sliderMagnifier,"click",BX.delegate(this.toggleMainPictPopup,this)),BX.bind(document,"keyup",BX.proxy(this.closeByEscape,this)),BX.bind(this.getEntity(this.obBigSlider,"close-popup"),"click",BX.proxy(this.hideMainPictPopup,this)))},checkSliderControls:function(t){var s=t>1?"":"none";this.node.sliderControlLeft&&(this.node.sliderControlLeft.style.display=s),this.node.sliderControlRight&&(this.node.sliderControlRight.style.display=s)},setCurrentImg:function(t,s,i){var e,a,o,n=[],r=0,h=0;if(this.currentImg.id=t.ID,this.currentImg.src=t.SRC,this.currentImg.width=t.WIDTH,this.currentImg.height=t.HEIGHT,s&&this.node.videoImageContainer){for(e=this.getEntities(this.node.videoImageContainer,"video"),r=0;r<e.length;r++)n[h]=e[r],h++;for(a=this.getEntities(this.node.videoImageContainer,"image"),r=0;r<a.length;r++)n[h]=a[r],h++;for(o=n.length;o--;)if(n[o].getAttribute("data-id")==t.ID)BX.hasClass(n[o],"active")||this.node.sliderProgressBar&&this.resetProgress(),BX.addClass(n[o],"active");else if(BX.hasClass(n[o],"active")){BX.removeClass(n[o],"active");var u=BX.findChild(n[o],{tagName:"iframe"},!0,!1);u&&u.contentWindow.postMessage('{"event": "command", "func": "pauseVideo", "args": ""}',"*")}}this.config.useMagnifier&&!this.isTouchDevice&&(this.setMagnifierParams(),s&&this.disableMagnifier(!0))},setMagnifierParams:function(){for(var t,s=this.getEntities(this.node.videoImageContainer,"image"),i=s.length;i--;)(t=s[i].querySelector("img"))&&(t.setAttribute("data-title",t.getAttribute("title")||""),t.removeAttribute("title"),s[i].getAttribute("data-id")==this.currentImg.id&&(BX.unbind(this.currentImg.node,"mouseover",BX.proxy(this.enableMagnifier,this)),this.currentImg.node=t,this.currentImg.node.style.backgroundImage="url("+this.currentImg.src+")",this.currentImg.node.style.backgroundSize="100% auto",BX.bind(this.currentImg.node,"mouseover",BX.proxy(this.enableMagnifier,this))))},enableMagnifier:function(){BX.bind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this))},disableMagnifier:function(t){this.magnify.enabled&&(clearTimeout(this.magnify.timer),BX.removeClass(this.obBigSlider,"magnified"),this.magnify.enabled=!1,this.currentImg.node.style.backgroundSize="100% auto",t?(this.currentImg.node.style.height=this.magnify.height+"px",this.currentImg.node.style.width=this.magnify.width+"px",this.magnify.timer=setTimeout(BX.delegate(function(){this.currentImg.node.src=this.currentImg.src,this.currentImg.node.style.height="",this.currentImg.node.style.width=""},this),250)):(this.currentImg.node.src=this.currentImg.src,this.currentImg.node.style.height="",this.currentImg.node.style.width=""),BX.unbind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this)))},moveMagnifierArea:function(t){var s=BX.pos(this.currentImg.node),i=this.inRect(t,s);if(this.inBound(s,i)){var e,a,o,n,r,h=i.X/this.currentImg.node.width*100,u=i.Y/this.currentImg.node.height*100;this.currentImg.node.style.backgroundPosition=h+"% "+u+"%",this.magnify.enabled||(clearTimeout(this.magnify.timer),BX.addClass(this.obBigSlider,"magnified"),this.currentImg.node.style.height=(this.magnify.height=this.currentImg.node.clientHeight)+"px",this.currentImg.node.style.width=(this.magnify.width=this.currentImg.node.offsetWidth)+"px",e=this.currentImg.width/this.currentImg.height,(a=this.obBigSlider.offsetWidth)>this.currentImg.width&&!BX.hasClass(this.obBigSlider,"popup")?(n=(o=a)/e,r=100):(o=this.currentImg.width,n=this.currentImg.height,r=this.config.magnifierZoomPercent>100?this.config.magnifierZoomPercent:100),this.currentImg.node.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQI12P4zwAAAgEBAKrChTYAAAAASUVORK5CYII=",this.currentImg.node.style.backgroundSize=r+"% auto",this.magnify.timer=setTimeout(BX.delegate(function(){this.currentImg.node.style.height=n+"px",this.currentImg.node.style.width=o+"px"},this),10)),this.magnify.enabled=!0}else this.disableMagnifier(!0)},inBound:function(t,s){return s.Y>=0&&t.height>=s.Y&&s.X>=0&&t.width>=s.X},inRect:function(t,s){var i=BX.GetWindowSize(),e={X:0,Y:0,globalX:0,globalY:0};return e.globalX=t.clientX+i.scrollLeft,t.offsetX&&t.offsetX<0&&(e.globalX-=t.offsetX),e.X=e.globalX-s.left,e.globalY=t.clientY+i.scrollTop,t.offsetY&&t.offsetY<0&&(e.globalY-=t.offsetY),e.Y=e.globalY-s.top,e},setProductMainPict:function(t){var s=-1,i=0,e=0;if(this.product.sliderCount){for(e=0;e<this.product.sliderPict.length;e++)if(t===this.product.sliderPict[e].ID){s=e;break}if(s>-1)for(this.product.sliderPict[s]&&this.setCurrentImg(this.product.sliderPict[s],!0),i=0;i<this.product.slider.ITEMS.length;i++)this.product.slider.ITEMS[i].getAttribute("data-value")===t?BX.addClass(this.product.slider.ITEMS[i],"active"):BX.hasClass(this.product.slider.ITEMS[i],"active")&&BX.removeClass(this.product.slider.ITEMS[i],"active")}},selectSliderImg:function(t){var s="",i=[];(t=BX.type.isDomNode(t)?t:BX.proxy_context)&&t.hasAttribute("data-value")&&(-1!==(s=t.getAttribute("data-value")).indexOf("_")?(i=s.split("_"),this.setMainPict(i[0],i[1])):this.setProductMainPict(s))},setMainPict:function(t,s,i){var e,a,o=-1,n=-1,r="";for(e=0;e<this.offers.length;e++)if(t===this.offers[e].ID){o=e;break}if(o>-1&&this.offers[o].SLIDER_COUNT>0){for(a=0;a<this.offers[o].SLIDER.length;a++)if(s===this.offers[o].SLIDER[a].ID){n=a;break}if(n>-1)for(this.offers[o].SLIDER[n]&&this.setCurrentImg(this.offers[o].SLIDER[n],!0,i),r=t+"_"+s,e=0;e<this.product.slider.ITEMS.length;e++)this.product.slider.ITEMS[e].getAttribute("data-value")===r?BX.addClass(this.product.slider.ITEMS[e],"active"):BX.hasClass(this.product.slider.ITEMS[e],"active")&&BX.removeClass(this.product.slider.ITEMS[e],"active")}},setMainPictFromItem:function(t){if(this.node.videoImageContainer){var s=!1,i={};this.offers[t]&&(this.offers[t].DETAIL_PICTURE?(i=this.offers[t].DETAIL_PICTURE,s=!0):this.offers[t].PREVIEW_PICTURE&&(i=this.offers[t].PREVIEW_PICTURE,s=!0)),s||(this.defaultPict.detail?(i=this.defaultPict.detail,s=!0):this.defaultPict.preview&&(i=this.defaultPict.preview,s=!0)),s&&this.setCurrentImg(i,!0,!0)}},toggleMainPictPopup:function(){BX.hasClass(this.obBigSlider,"popup")?this.hideMainPictPopup():this.showMainPictPopup()},showMainPictPopup:function(){this.config.useMagnifier&&this.disableMagnifier(!1),BX.addClass(this.obBigSlider,"popup"),this.node.videoImageContainer.style.cursor="",document.body.style.overflow="hidden"},hideMainPictPopup:function(){this.config.useMagnifier&&this.disableMagnifier(!1),BX.removeClass(this.obBigSlider,"popup"),this.node.videoImageContainer.style.cursor="zoom-in",document.body.style.overflow=""},closeByEscape:function(s){27==(s=s||t.event).keyCode&&this.hideMainPictPopup()},checkCurrentSkuItem:function(t){this.skuItemContainer=BX.findParent(t,{attrs:{"data-entity":"sku-item"}}),this.skuItemContainer&&(this.skuItemNum=parseInt(this.skuItemContainer.getAttribute("data-num")),this.skuItem=this.offers[this.skuItemNum],this.obSkuItemCompare=this.skuItemContainer.querySelector('[data-entity="compare"]'),this.obSkuItemPriceCurrent=this.skuItemContainer.querySelector('[data-entity="price-current"]'),this.obSkuItemPriceOld=this.skuItemContainer.querySelector('[data-entity="price-old"]'),this.obSkuItemPriceDiscount=this.skuItemContainer.querySelector('[data-entity="price-economy"]'),this.obSkuItemQuantity=this.skuItemContainer.querySelector('[data-entity="quantity"]'),this.obSkuItemQuantityUp=this.skuItemContainer.querySelector('[data-entity="quantity-up"]'),this.obSkuItemQuantityDown=this.skuItemContainer.querySelector('[data-entity="quantity-down"]'),this.obSkuItemPcQuantity=this.skuItemContainer.querySelector('[data-entity="pc-quantity"]'),this.obSkuItemPcQuantityUp=this.skuItemContainer.querySelector('[data-entity="pc-quantity-up"]'),this.obSkuItemPcQuantityDown=this.skuItemContainer.querySelector('[data-entity="pc-quantity-down"]'),this.obSkuItemSqMQuantity=this.skuItemContainer.querySelector('[data-entity="sq-m-quantity"]'),this.obSkuItemSqMQuantityUp=this.skuItemContainer.querySelector('[data-entity="sq-m-quantity-up"]'),this.obSkuItemSqMQuantityDown=this.skuItemContainer.querySelector('[data-entity="sq-m-quantity-down"]'),BX.util.in_array("BUY",this.config.basketAction)&&(this.obSkuItemBuyBtn=this.skuItemContainer.querySelector('[data-entity="buy"]')),BX.util.in_array("ADD",this.config.basketAction)&&(this.obSkuItemAddToBasketBtn=this.skuItemContainer.querySelector('[data-entity="add"]')),this.obSkuItemDelay=this.skuItemContainer.querySelector('[data-entity="delay"]'),this.skuItemCanBuy=this.skuItem.CAN_BUY,this.skuItemCurrentPriceMode=this.skuItem.ITEM_PRICE_MODE,this.skuItemCurrentPrices=this.skuItem.ITEM_PRICES,this.skuItemCurrentPriceSelected=this.skuItem.ITEM_PRICE_SELECTED,this.skuItemCurrentQuantityRanges=this.skuItem.ITEM_QUANTITY_RANGES,this.skuItemCurrentQuantityRangeSelected=this.skuItem.ITEM_QUANTITY_RANGE_SELECTED,this.skuItemCurrentMeasure=this.skuItem.ITEM_MEASURE,this.skuItemIsDblQuantity=this.skuItem.QUANTITY_FLOAT,this.skuItemCheckQuantity=this.skuItem.CHECK_QUANTITY,this.skuItemIsDblQuantity?(this.skuItemStepQuantity=Math.round(parseFloat(this.skuItem.STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor,this.skuItemMaxQuantity=parseFloat(this.skuItem.MAX_QUANTITY),this.skuItemMinQuantity="Q"===this.skuItemCurrentPriceMode?parseFloat(this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].MIN_QUANTITY):this.skuItemStepQuantity):(this.skuItemStepQuantity=parseInt(this.skuItem.STEP_QUANTITY,10),this.skuItemMaxQuantity=parseInt(this.skuItem.MAX_QUANTITY,10),this.skuItemMinQuantity="Q"===this.skuItemCurrentPriceMode?parseInt(this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].MIN_QUANTITY):this.skuItemStepQuantity),this.skuItemStepPcQuantity=parseInt(this.skuItem.PC_STEP_QUANTITY,10),this.skuItemMaxPcQuantity=parseInt(this.skuItem.PC_MAX_QUANTITY,10),this.skuItemMinPcQuantity=this.skuItemStepPcQuantity,this.skuItemStepSqMQuantity=Math.round(parseFloat(this.skuItem.SQ_M_STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor,this.skuItemMaxSqMQuantity=parseFloat(this.skuItem.SQ_M_MAX_QUANTITY),this.skuItemMinSqMQuantity="Q"===this.skuItemCurrentPriceMode?parseFloat(this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_MIN_QUANTITY):this.skuItemStepSqMQuantity,this.skuItem.OBJECT&&(this.skuItemObject.id=this.skuItem.OBJECT.ID?this.skuItem.OBJECT.ID:0,this.skuItemObject.name=this.skuItem.OBJECT.NAME?this.skuItem.OBJECT.NAME:"",this.skuItemObject.address=this.skuItem.OBJECT.ADDRESS?this.skuItem.OBJECT.ADDRESS:"",this.skuItemObject.timezone=this.skuItem.OBJECT.TIMEZONE?this.skuItem.OBJECT.TIMEZONE:"",this.skuItemObject.workingHours=this.skuItem.OBJECT.WORKING_HOURS?this.skuItem.OBJECT.WORKING_HOURS:{},this.skuItemObject.workingHoursToday=this.skuItem.OBJECT.WORKING_HOURS_TODAY?this.skuItem.OBJECT.WORKING_HOURS_TODAY:{},this.skuItemObject.phone=this.skuItem.OBJECT.PHONE.VALUE?this.skuItem.OBJECT.PHONE.VALUE:{},this.skuItemObject.phoneDescription=this.skuItem.OBJECT.PHONE.DESCRIPTION?this.skuItem.OBJECT.PHONE.DESCRIPTION:{},this.skuItemObject.email=this.skuItem.OBJECT.EMAIL.VALUE?this.skuItem.OBJECT.EMAIL.VALUE:{},this.skuItemObject.emailDescription=this.skuItem.OBJECT.EMAIL.DESCRIPTION?this.skuItem.OBJECT.EMAIL.DESCRIPTION:{},this.skuItemObject.skype=this.skuItem.OBJECT.SKYPE.VALUE?this.skuItem.OBJECT.SKYPE.VALUE:{},this.skuItemObject.skypeDescription=this.skuItem.OBJECT.SKYPE.DESCRIPTION?this.skuItem.OBJECT.SKYPE.DESCRIPTION:{},this.skuItemObject.callbackForm=!!this.skuItem.OBJECT.CALLBACK_FORM&&this.skuItem.OBJECT.CALLBACK_FORM))},quantityUp:function(){var t=0,s=0,i=0,e=!0,a=!0,o=!0;this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),0===this.errorCode&&this.config.showQuantity&&(!this.obSkuItems&&this.canBuy||this.obSkuItems&&this.skuItemCanBuy)&&((!this.obSkuItems&&this.obQuantity||this.obSkuItems&&this.obSkuItemQuantity)&&(t=!this.obSkuItems&&this.isDblQuantity||this.obSkuItems&&this.skuItemIsDblQuantity?parseFloat(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value):parseInt(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value,10),isNaN(t)||(t+=this.obSkuItems?this.skuItemStepQuantity:this.stepQuantity,(!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&t>(this.obSkuItems?this.skuItemMaxQuantity:this.maxQuantity)&&(e=!1),e&&((!this.obSkuItems&&this.isDblQuantity||this.obSkuItems&&this.skuItemIsDblQuantity)&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).value=t,this.setPrice()))),(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity)&&(s=parseInt(this.obSkuItems?this.obSkuItemPcQuantity.value:this.obPcQuantity.value,10),isNaN(s)||(s+=this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity,(!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&s>(this.obSkuItems?this.skuItemMaxPcQuantity:this.maxPcQuantity)&&(a=!1),a&&((this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=s)),i=parseFloat(this.obSkuItems?this.obSkuItemSqMQuantity.value:this.obSqMQuantity.value),isNaN(i)||(i+=this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity,(!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&i>(this.obSkuItems?this.skuItemMaxSqMQuantity:this.maxSqMQuantity)&&(o=!1),o&&(i=Math.round(i*this.precisionFactor)/this.precisionFactor,(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=i)),a&&o&&this.setPrice()))},quantityDown:function(){var t=0,s=0,i=0,e=!0,a=!0,o=!0;this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),0===this.errorCode&&this.config.showQuantity&&(!this.obSkuItems&&this.canBuy||this.obSkuItems&&this.skuItemCanBuy)&&((!this.obSkuItems&&this.obQuantity||this.obSkuItems&&this.obSkuItemQuantity)&&(t=!this.obSkuItems&&this.isDblQuantity||this.obSkuItems&&this.skuItemIsDblQuantity?parseFloat(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value):parseInt(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value,10),isNaN(t)||(t-=this.obSkuItems?this.skuItemStepQuantity:this.stepQuantity,this.checkPriceRange(t),t<(this.obSkuItems?this.skuItemMinQuantity:this.minQuantity)&&(e=!1),e&&((!this.obSkuItems&&this.isDblQuantity||this.obSkuItems&&this.skuItemIsDblQuantity)&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).value=t,this.setPrice()))),(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity)&&(s=parseInt(this.obSkuItems?this.obSkuItemPcQuantity.value:this.obPcQuantity.value,10),isNaN(s)||(s-=this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity,(!this.obSkuItems&&!this.obQuantity&&this.currentPrices[this.currentPriceSelected].SQ_M_PRICE||this.obSkuItems&&this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE)&&this.checkPriceRange(s),s<(this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity)&&(a=!1),a&&((this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=s)),i=parseFloat(this.obSkuItems?this.obSkuItemSqMQuantity.value:this.obSqMQuantity.value),isNaN(i)||(i-=this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity,(!this.obSkuItems&&!this.obQuantity&&!this.currentPrices[this.currentPriceSelected].SQ_M_PRICE||this.obSkuItems&&!this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE)&&this.checkPriceRange(i),i<(this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity)&&(o=!1),o&&(i=Math.round(i*this.precisionFactor)/this.precisionFactor,(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=i)),a&&o&&this.setPrice()))},quantityChange:function(){var t,s,i,e=0,a=0,o=0;this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),0===this.errorCode&&this.config.showQuantity&&(!this.obSkuItems&&this.canBuy||this.obSkuItems&&this.skuItemCanBuy?(e=!this.obSkuItems&&this.isDblQuantity||this.obSkuItems&&this.skuItemIsDblQuantity?parseFloat(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value):Math.round(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value),isNaN(e)?(this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).value=this.obSkuItems?this.skuItemMinQuantity:this.minQuantity:((!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&e>(this.obSkuItems?this.skuItemMaxQuantity:this.maxQuantity)&&(e=this.obSkuItems?this.skuItemMaxQuantity:this.maxQuantity),this.checkPriceRange(e),e<(this.obSkuItems?this.skuItemMinQuantity:this.minQuantity)?e=this.obSkuItems?this.skuItemMinQuantity:this.minQuantity:(e=(t=Math.round(Math.round(e*this.precisionFactor/(this.obSkuItems?this.skuItemStepQuantity:this.stepQuantity))/this.precisionFactor)||1)<=1?this.obSkuItems?this.skuItemStepQuantity:this.stepQuantity:t*(this.obSkuItems?this.skuItemStepQuantity:this.stepQuantity),e=Math.round(e*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).value=e),!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity&&(a="pc. 1"==this.currentMeasure.SYMBOL_INTL?this.obQuantity.value:Math.round(this.obQuantity.value/this.stepQuantity),isNaN(a)?this.obPcQuantity.value=this.minPcQuantity:(this.checkQuantity&&a>this.maxPcQuantity&&(a=this.maxPcQuantity),a<this.minPcQuantity?a=this.minPcQuantity:(a=(s=Math.round(Math.round(a*this.precisionFactor/this.stepPcQuantity)/this.precisionFactor)||1)<=1?this.stepPcQuantity:s*this.stepPcQuantity,a=Math.round(a*this.precisionFactor)/this.precisionFactor),this.obPcQuantity.value=a),o="m2"==this.currentMeasure.SYMBOL_INTL?this.obQuantity.value:parseFloat(this.obQuantity.value*this.stepSqMQuantity/this.stepQuantity),isNaN(o)?this.obSqMQuantity.value=this.minSqMQuantity:(this.checkQuantity&&o>this.maxSqMQuantity&&(o=this.maxSqMQuantity),o<this.minSqMQuantity?o=this.minSqMQuantity:(o=(i=Math.round(Math.round(o*this.precisionFactor/this.stepSqMQuantity)/this.precisionFactor)||1)<=1?this.stepSqMQuantity:i*this.stepSqMQuantity,o=Math.round(o*this.precisionFactor)/this.precisionFactor),this.obSqMQuantity.value=o))):((this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).value=this.obSkuItems?this.skuItemMinQuantity:this.minQuantity,!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity&&(this.obPcQuantity.value=this.minPcQuantity,this.obSqMQuantity.value=this.minSqMQuantity)),this.setPrice())},pcQuantityChange:function(){var t,s,i,e=0,a=0,o=0;this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),0===this.errorCode&&this.config.showQuantity&&(!this.obSkuItems&&this.canBuy||this.obSkuItems&&this.skuItemCanBuy?(e=Math.round(this.obSkuItems?this.obSkuItemPcQuantity.value:this.obPcQuantity.value),isNaN(e)?(this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity:((!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&e>(this.obSkuItems?this.skuItemMaxPcQuantity:this.maxPcQuantity)&&(e=this.obSkuItems?this.skuItemMaxPcQuantity:this.maxPcQuantity),(!this.obSkuItems&&!this.obQuantity&&this.currentPrices[this.currentPriceSelected].SQ_M_PRICE||this.obSkuItems&&this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE)&&this.checkPriceRange(e),e<(this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity)?e=this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity:(e=(t=Math.round(Math.round(e*this.precisionFactor/(this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity))/this.precisionFactor)||1)<=1?this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity:t*(this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity),e=Math.round(e*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=e),(!this.obSkuItems&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemSqMQuantity)&&(a=this.obSkuItems?parseFloat(this.obSkuItemPcQuantity.value*this.skuItemStepSqMQuantity):parseFloat(this.obPcQuantity.value*this.stepSqMQuantity),isNaN(a)?(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity:((!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&a>(this.obSkuItems?this.skuItemMaxSqMQuantity:this.maxSqMQuantity)&&(a=this.obSkuItems?this.skuItemMaxSqMQuantity:this.maxSqMQuantity),(!this.obSkuItems&&!this.obQuantity&&!this.currentPrices[this.currentPriceSelected].SQ_M_PRICE||this.obSkuItems&&!this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE)&&this.checkPriceRange(a),a<(this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity)?a=this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity:(a=(s=Math.round(Math.round(a*this.precisionFactor/(this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity))/this.precisionFactor)||1)<=1?this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity:s*(this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity),a=Math.round(a*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=a)),!this.obSkuItems&&this.obQuantity&&(o=this.isDblQuantity?parseFloat(this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value):Math.round(this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value),isNaN(o)?this.obQuantity.value=this.minQuantity:(this.checkQuantity&&o>this.maxQuantity&&(o=this.maxQuantity),this.checkPriceRange(o),o<this.minQuantity?o=this.minQuantity:(o=(i=Math.round(Math.round(o*this.precisionFactor/this.stepQuantity)/this.precisionFactor)||1)<=1?this.stepQuantity:i*this.stepQuantity,o=Math.round(o*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=o))):((this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity,(!this.obSkuItems&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemSqMQuantity)&&((this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity),!this.obSkuItems&&this.obQuantity&&(this.obQuantity.value=this.minQuantity)),this.setPrice())},sqMQuantityChange:function(){var t,s,i,e=0,a=0,o=0;this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),0===this.errorCode&&this.config.showQuantity&&(!this.obSkuItems&&this.canBuy||this.obSkuItems&&this.skuItemCanBuy?(e=parseFloat(this.obSkuItems?this.obSkuItemSqMQuantity.value:this.obSqMQuantity.value),isNaN(e)?(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity:((!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&e>(this.obSkuItems?this.skuItemMaxSqMQuantity:this.maxSqMQuantity)&&(e=this.obSkuItems?this.skuItemMaxSqMQuantity:this.maxSqMQuantity),(!this.obSkuItems&&!this.obQuantity&&!this.currentPrices[this.currentPriceSelected].SQ_M_PRICE||this.obSkuItems&&!this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE)&&this.checkPriceRange(e),e<(this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity)?e=this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity:(e=(t=Math.round(Math.round(e*this.precisionFactor/(this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity))/this.precisionFactor)||1)<=1?this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity:t*(this.obSkuItems?this.skuItemStepSqMQuantity:this.stepSqMQuantity),e=Math.round(e*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=e),(!this.obSkuItems&&this.obPcQuantity||this.obSkuItems&&this.obSkuItemPcQuantity)&&(a=this.obSkuItems?Math.round(this.obSkuItemSqMQuantity.value*this.skuItemStepPcQuantity/this.skuItemStepSqMQuantity):Math.round(this.obSqMQuantity.value*this.stepPcQuantity/this.stepSqMQuantity),isNaN(a)?(this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity:((!this.obSkuItems&&this.checkQuantity||this.obSkuItems&&this.skuItemCheckQuantity)&&a>(this.obSkuItems?this.skuItemMaxPcQuantity:this.maxPcQuantity)&&(a=this.obSkuItems?this.skuItemMaxPcQuantity:this.maxPcQuantity),(!this.obSkuItems&&!this.obQuantity&&this.currentPrices[this.currentPriceSelected].SQ_M_PRICE||this.obSkuItems&&this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE)&&this.checkPriceRange(a),a<(this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity)?a=this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity:(a=(s=Math.round(Math.round(a*this.precisionFactor/(this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity))/this.precisionFactor)||1)<=1?this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity:s*(this.obSkuItems?this.skuItemStepPcQuantity:this.stepPcQuantity),a=Math.round(a*this.precisionFactor)/this.precisionFactor),(this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=a)),!this.obSkuItems&&this.obQuantity&&(o=this.isDblQuantity?parseFloat(this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value):Math.round(this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value),isNaN(o)?this.obQuantity.value=this.minQuantity:(this.checkQuantity&&o>this.maxQuantity&&(o=this.maxQuantity),this.checkPriceRange(o),o<this.minQuantity?o=this.minQuantity:(o=(i=Math.round(Math.round(o*this.precisionFactor/this.stepQuantity)/this.precisionFactor)||1)<=1?this.stepQuantity:i*this.stepQuantity,o=Math.round(o*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=o))):((this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).value=this.obSkuItems?this.skuItemMinSqMQuantity:this.minSqMQuantity,(!this.obSkuItems&&this.obPcQuantity||this.obSkuItems&&this.obSkuItemPcQuantity)&&((this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).value=this.obSkuItems?this.skuItemMinPcQuantity:this.minPcQuantity),!this.obSkuItems&&this.obQuantity&&(this.obQuantity.value=this.minQuantity)),this.setPrice())},quantitySet:function(t){var s,i,e,a,o=this.offers[t],n=this.offers[this.offerNum];if(0===this.errorCode){this.canBuy=o.CAN_BUY,this.currentPriceMode=o.ITEM_PRICE_MODE,this.currentPrices=o.ITEM_PRICES,this.currentPriceSelected=o.ITEM_PRICE_SELECTED,this.currentQuantityRanges=o.ITEM_QUANTITY_RANGES,this.currentQuantityRangeSelected=o.ITEM_QUANTITY_RANGE_SELECTED,this.currentMeasure=o.ITEM_MEASURE;var r=this.currentPrices[this.currentPriceSelected],h=o.PARTNERS_URL;if(this.canBuy?(r&&r.PRICE>0?(h?(this.obDelay&&BX.style(this.obDelay,"display","none"),this.obBuyBtn&&BX.style(this.obBuyBtn,"display","none"),this.obAddToBasketBtn&&BX.style(this.obAddToBasketBtn,"display","none"),this.obPartnersBtn&&BX.adjust(this.obPartnersBtn,{props:{disabled:!1},style:{display:""}}),this.obPartnersMess&&BX.style(this.obPartnersMess,"display","")):(this.obDelay&&BX.style(this.obDelay,"display",""),this.obBuyBtn&&BX.adjust(this.obBuyBtn,{props:{disabled:!1},style:{display:""}}),this.obAddToBasketBtn&&BX.adjust(this.obAddToBasketBtn,{props:{disabled:!1},style:{display:""}}),this.obPartnersBtn&&BX.style(this.obPartnersBtn,"display","none"),this.obPartnersMess&&BX.style(this.obPartnersMess,"display","none")),this.node.quantity&&BX.style(this.node.quantity,"display",""),this.obAskPrice&&BX.style(this.obAskPrice,"display","none")):(h?(this.obBuyBtn&&BX.style(this.obBuyBtn,"display","none"),this.obAddToBasketBtn&&BX.style(this.obAddToBasketBtn,"display","none"),this.obPartnersBtn&&BX.adjust(this.obPartnersBtn,{props:{disabled:!0},style:{display:""}})):(this.obBuyBtn&&BX.adjust(this.obBuyBtn,{props:{disabled:!0},style:{display:""}}),this.obAddToBasketBtn&&BX.adjust(this.obAddToBasketBtn,{props:{disabled:!0},style:{display:""}}),this.obPartnersBtn&&BX.style(this.obPartnersBtn,"display","none")),this.obDelay&&BX.style(this.obDelay,"display","none"),this.node.quantity&&BX.style(this.node.quantity,"display","none"),this.obPartnersMess&&BX.style(this.obPartnersMess,"display","none"),this.obAskPrice&&BX.style(this.obAskPrice,"display","")),this.obNotAvail&&BX.style(this.obNotAvail,"display","none"),this.obSubscribe&&BX.style(this.obSubscribe,"display","none")):(h?(this.obBuyBtn&&BX.style(this.obBuyBtn,"display","none"),this.obAddToBasketBtn&&BX.style(this.obAddToBasketBtn,"display","none"),this.obPartnersBtn&&BX.adjust(this.obPartnersBtn,{props:{disabled:!0},style:{display:""}})):(this.obBuyBtn&&BX.adjust(this.obBuyBtn,{props:{disabled:!0},style:{display:""}}),this.obAddToBasketBtn&&BX.adjust(this.obAddToBasketBtn,{props:{disabled:!0},style:{display:""}}),this.obPartnersBtn&&BX.style(this.obPartnersBtn,"display","none")),this.obDelay&&BX.style(this.obDelay,"display","none"),this.node.quantity&&BX.style(this.node.quantity,"display","none"),this.obPartnersMess&&BX.style(this.obPartnersMess,"display","none"),this.obAskPrice&&BX.style(this.obAskPrice,"display","none"),this.obNotAvail&&BX.style(this.obNotAvail,"display",""),this.obSubscribe&&("Y"===o.CATALOG_SUBSCRIBE?(BX.style(this.obSubscribe,"display",""),this.obSubscribe.setAttribute("data-item",o.ID),BX(this.visual.SUBSCRIBE_LINK+"_hidden").click()):BX.style(this.obSubscribe,"display","none"))),this.isDblQuantity=o.QUANTITY_FLOAT,this.checkQuantity=o.CHECK_QUANTITY,this.isDblQuantity?(this.stepQuantity=Math.round(parseFloat(o.STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor,this.maxQuantity=parseFloat(o.MAX_QUANTITY),this.minQuantity="Q"===this.currentPriceMode?parseFloat(this.currentPrices[this.currentPriceSelected].MIN_QUANTITY):this.stepQuantity):(this.stepQuantity=parseInt(o.STEP_QUANTITY,10),this.maxQuantity=parseInt(o.MAX_QUANTITY,10),this.minQuantity="Q"===this.currentPriceMode?parseInt(this.currentPrices[this.currentPriceSelected].MIN_QUANTITY):this.stepQuantity),this.stepPcQuantity=parseInt(o.PC_STEP_QUANTITY,10),this.maxPcQuantity=parseInt(o.PC_MAX_QUANTITY,10),this.minPcQuantity=this.stepPcQuantity,this.stepSqMQuantity=Math.round(parseFloat(o.SQ_M_STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor,this.maxSqMQuantity=parseFloat(o.SQ_M_MAX_QUANTITY),this.minSqMQuantity="Q"===this.currentPriceMode?parseFloat(this.currentPrices[this.currentPriceSelected].SQ_M_MIN_QUANTITY):this.stepSqMQuantity,this.config.showQuantity){if(this.obQuantity){var u=n.ITEM_PRICES.length&&n.ITEM_PRICES[n.ITEM_PRICE_SELECTED]&&n.ITEM_PRICES[n.ITEM_PRICE_SELECTED].MIN_QUANTITY!=this.minQuantity;i=this.isDblQuantity?Math.round(parseFloat(n.STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor!==this.stepQuantity||u||n.MEASURE!==o.MEASURE||this.checkQuantity&&parseFloat(n.MAX_QUANTITY)>this.maxQuantity&&parseFloat(this.obQuantity.value)>this.maxQuantity:parseInt(n.STEP_QUANTITY,10)!==this.stepQuantity||u||n.MEASURE!==o.MEASURE||this.checkQuantity&&parseInt(n.MAX_QUANTITY,10)>this.maxQuantity&&parseInt(this.obQuantity.value,10)>this.maxQuantity,this.obQuantity.disabled=!this.canBuy,i&&(this.obQuantity.value=this.minQuantity)}if(this.obMeasure&&(o.MEASURE?BX.adjust(this.obMeasure,{html:o.MEASURE}):BX.adjust(this.obMeasure,{html:""})),this.obPriceMeasure&&(o.MEASURE?BX.adjust(this.obPriceMeasure,{html:"/"+o.MEASURE}):BX.adjust(this.obPriceMeasure,{html:""})),this.obPcQuantity&&this.obSqMQuantity)if("pc. 1"==this.currentMeasure.SYMBOL_INTL||"m2"==this.currentMeasure.SYMBOL_INTL){if(r.SQ_M_PRICE){var c=n.ITEM_PRICES.length&&n.ITEM_PRICES[n.ITEM_PRICE_SELECTED]&&n.ITEM_PRICES[n.ITEM_PRICE_SELECTED].PC_MIN_QUANTITY!=this.minPcQuantity;e=parseInt(n.PC_STEP_QUANTITY,10)!==this.stepPcQuantity||c||n.MEASURE!==o.MEASURE||this.checkQuantity&&parseInt(n.PC_MAX_QUANTITY,10)>this.maxPcQuantity&&parseInt(this.obPcQuantity.value,10)>this.maxPcQuantity}else{var l=n.ITEM_PRICES.length&&n.ITEM_PRICES[n.ITEM_PRICE_SELECTED]&&n.ITEM_PRICES[n.ITEM_PRICE_SELECTED].SQ_M_MIN_QUANTITY!=this.minSqMQuantity;a=Math.round(parseFloat(n.SQ_M_STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor!==this.stepSqMQuantity||l||n.MEASURE!==o.MEASURE||this.checkQuantity&&parseFloat(n.SQ_M_MAX_QUANTITY)>this.maxSqMQuantity&&parseFloat(this.obSqMQuantity.value)>this.maxSqMQuantity}this.obPcQuantity.disabled=!this.canBuy,this.obSqMQuantity.disabled=!this.canBuy,(e||a)&&(this.obPcQuantity.value=this.minPcQuantity,this.obSqMQuantity.value=this.minSqMQuantity),this.obPriceMeasure&&BX.adjust(this.obPriceMeasure,{html:"/"+BX.message("CATALOG_ELEMENT_ARTICLE_SQ_M_MESSAGE")}),BX.style(this.obPcQuantity.parentNode,"display",""),BX.style(this.obSqMQuantity.parentNode,"display",""),BX.style(this.obQuantity.parentNode,"display","none")}else BX.style(this.obPcQuantity.parentNode,"display","none"),BX.style(this.obSqMQuantity.parentNode,"display","none"),BX.style(this.obQuantity.parentNode,"display","")}if(this.obQuantityLimit.all&&this.obQuantityLimitNotAvl.all&&(this.canBuy?(this.checkQuantity?(s="M"===this.config.showMaxQuantity?this.maxQuantity/this.stepQuantity>=this.config.relativeQuantityFactor?BX.message("CATALOG_ELEMENT_ARTICLE_RELATIVE_QUANTITY_MANY"):BX.message("CATALOG_ELEMENT_ARTICLE_RELATIVE_QUANTITY_FEW"):this.maxQuantity,BX.adjust(this.obQuantityLimit.value,{html:s})):BX.adjust(this.obQuantityLimit.value,{html:""}),BX.adjust(this.obQuantityLimit.all,{style:{display:""}}),BX.adjust(this.obQuantityLimitNotAvl.all,{style:{display:"none"}})):(BX.adjust(this.obQuantityLimit.value,{html:""}),BX.adjust(this.obQuantityLimit.all,{style:{display:"none"}}),BX.adjust(this.obQuantityLimitNotAvl.all,{style:{display:""}}))),this.config.usePriceRanges&&this.obPriceRanges)if("Q"===this.currentPriceMode&&o.PRICE_RANGES_HTML){var d=this.getEntity(this.obPriceRanges,"price-ranges-body");d&&(d.innerHTML=o.PRICE_RANGES_HTML),this.obPriceRanges.style.display=""}else this.obPriceRanges.style.display="none"}},selectOfferProp:function(){var t=0,s=[],i=null,e=BX.proxy_context;if(e&&e.hasAttribute("data-treevalue")){if(BX.hasClass(e,"selected"))return;if("object"==typeof document.activeElement&&document.activeElement.blur(),s=e.getAttribute("data-treevalue").split("_"),this.searchOfferPropIndex(s[0],s[1]),(i=BX.findChildren(e.parentNode,{tagName:"li"},!1))&&i.length)for(t=0;t<i.length;t++)BX.removeClass(i[t],"selected");BX.addClass(e,"selected")}},searchOfferPropIndex:function(t,s){var i,e,a="",o=!1,n=[],r=[],h=-1,u={},c=[];for(i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===t){h=i;break}if(h>-1){for(i=0;i<h;i++)u[a="PROP_"+this.treeProps[i].ID]=this.selectedValues[a];for(u[a="PROP_"+this.treeProps[h].ID]=s,i=h+1;i<this.treeProps.length&&(a="PROP_"+this.treeProps[i].ID,o=this.getRowValues(u,a));i++){if(r=[],this.config.showAbsent)for(n=[],c=[],c=BX.clone(u,!0),e=0;e<o.length;e++)c[a]=o[e],r[r.length]=o[e],this.getCanBuy(c)&&(n[n.length]=o[e]);else n=o;this.selectedValues[a]&&BX.util.in_array(this.selectedValues[a],n)?u[a]=this.selectedValues[a]:this.config.showAbsent?u[a]=n.length?n[0]:r[0]:u[a]=n[0],this.updateRow(i,u[a],o,n)}this.selectedValues=u,this.changeInfo()}},updateRow:function(t,s,i,e){var a=0,o="",n=!1,r=null,h=this.getEntities(this.obTree,"sku-line-block");if(t>-1&&t<h.length)for(r=h[t].querySelectorAll("li"),a=0;a<r.length;a++)(n=(o=r[a].getAttribute("data-onevalue"))===s)?BX.addClass(r[a],"selected"):BX.removeClass(r[a],"selected"),BX.util.in_array(o,e)?BX.removeClass(r[a],"notallowed"):BX.addClass(r[a],"notallowed"),r[a].style.display=BX.util.in_array(o,i)?"":"none",n&&(h[t].style.display=0==o&&1==e.length?"none":"")},getRowValues:function(t,s){var i=[],e=0,a=0,o=!1,n=!0;if(0===t.length){for(e=0;e<this.offers.length;e++)BX.util.in_array(this.offers[e].TREE[s],i)||(i[i.length]=this.offers[e].TREE[s]);o=!0}else for(e=0;e<this.offers.length;e++){for(a in n=!0,t)if(t[a]!==this.offers[e].TREE[a]){n=!1;break}n&&(BX.util.in_array(this.offers[e].TREE[s],i)||(i[i.length]=this.offers[e].TREE[s]),o=!0)}return!!o&&i},getCanBuy:function(t){var s,i=0,e=!0,a=!1;for(s=0;s<this.offers.length;s++){for(i in e=!0,t)if(t[i]!==this.offers[s].TREE[i]){e=!1;break}if(e&&this.offers[s].CAN_BUY){a=!0;break}}return a},setCurrent:function(){var t,s=0,i="",e=!1,a=[],o={},n=[],r=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(i="PROP_"+this.treeProps[t].ID,e=this.getRowValues(o,i));t++){if(BX.util.in_array(r[i],e)?o[i]=r[i]:(o[i]=e[0],this.offerNum=0),this.config.showAbsent)for(a=[],n=[],n=BX.clone(o,!0),s=0;s<e.length;s++)n[i]=e[s],this.getCanBuy(n)&&(a[a.length]=e[s]);else a=e;this.updateRow(t,o[i],e,a)}this.selectedValues=o,this.changeInfo()},changeInfo:function(){var t=-1,s=0,i=!0,e={currentId:this.offerNum>-1?this.offers[this.offerNum].ID:0,newId:0};for(o=0;o<this.offers.length;o++){for(s in i=!0,this.selectedValues)if(this.selectedValues[s]!==this.offers[o].TREE[s]){i=!1;break}if(i){t=o;break}}if(t>-1){for(this.drawImages(this.offers[t].SLIDER),this.checkSliderControls(this.offers[t].SLIDER_COUNT),o=0;o<this.offers.length;o++)this.slider.controls[o].ID?o===t?(this.product.slider=this.slider.controls[o],this.slider.controls[o].CONT&&BX.show(this.slider.controls[o].CONT)):this.slider.controls[o].CONT&&BX.hide(this.slider.controls[o].CONT):o===t&&(this.product.slider={});if(this.offers[t].SLIDER_COUNT>0){for(s=0,o=0;o<this.offers[t].SLIDER.length;o++)this.offers[t].SLIDER[o].VALUE&&""!=this.offers[t].SLIDER[o].VALUE&&s++;this.setMainPict(this.offers[t].ID,this.offers[t].SLIDER[s].ID,!0)}else this.setMainPictFromItem(t);if(this.offers[t].SLIDER_COUNT>1?this.initSlider():this.stopSlider(),this.obArticle.all&&BX.adjust(this.obArticle.value,{html:this.offers[t].ARTICLE}),this.config.showSkuProps&&this.obMainSkuProps){var a=this.obMainSkuProps.querySelectorAll('[data-entity="sku-props"]');for(var o in a)a.hasOwnProperty(o)&&this.obMainSkuProps.removeChild(a[o]);this.offers[t].DISPLAY_PROPERTIES_MAIN_BLOCK&&BX.adjust(this.obMainSkuProps,{html:this.obMainSkuProps.innerHTML+this.offers[t].DISPLAY_PROPERTIES_MAIN_BLOCK})}this.quantitySet(t),this.setPrice(),this.setDelayed(this.offers[t].DELAYED),this.setBuyedAdded(this.offers[t].BUYED_ADDED),this.setCompared(this.offers[t].COMPARED),this.offerNum=t,e.newId=this.offers[this.offerNum].ID,BX.onCustomEvent("onCatalogStoreProductChange",[this.offers[this.offerNum].ID]),BX.onCustomEvent("onCatalogElementChangeOffer",e),e=null}},drawImages:function(t){if(this.node.videoImageContainer){var s,i,e=0,a=this.getEntities(this.node.videoImageContainer,"image");for(s in a)a.hasOwnProperty(s)&&BX.type.isDomNode(a[s])&&BX.remove(a[s]);for(s=0;s<t.length;s++)t[s].VALUE&&""!=t[s].VALUE?e++:(i=BX.create("IMG",{props:{src:t[s].SRC,alt:this.config.alt,title:this.config.title}}),this.node.videoImageContainer.appendChild(BX.create("DIV",{attrs:{"data-entity":"image","data-id":t[s].ID},props:{className:"product-item-detail-slider-image"+(s==e?" active":"")},children:[i]})))}},checkPriceRange:function(t){if(!(void 0===t||!this.obSkuItems&&"Q"!=this.currentPriceMode||this.obSkuItems&&"Q"!=this.skuItemCurrentPriceMode)){var s,i=!1;if(this.obSkuItems){for(var e in this.skuItemCurrentQuantityRanges)if(this.skuItemCurrentQuantityRanges.hasOwnProperty(e)&&(s=this.skuItemCurrentQuantityRanges[e],parseInt(t)>=parseInt(s.SORT_FROM)&&("INF"==s.SORT_TO||parseInt(t)<=parseInt(s.SORT_TO)))){i=!0,this.skuItemCurrentQuantityRangeSelected=s.HASH;break}}else for(var e in this.currentQuantityRanges)if(this.currentQuantityRanges.hasOwnProperty(e)&&(s=this.currentQuantityRanges[e],parseInt(t)>=parseInt(s.SORT_FROM)&&("INF"==s.SORT_TO||parseInt(t)<=parseInt(s.SORT_TO)))){i=!0,this.currentQuantityRangeSelected=s.HASH;break}if(!i&&(s=this.getMinPriceRange())&&(this.obSkuItems?this.skuItemCurrentQuantityRangeSelected=s.HASH:this.currentQuantityRangeSelected=s.HASH),this.obSkuItems){for(var a in this.skuItemCurrentPrices)if(this.skuItemCurrentPrices.hasOwnProperty(a)&&this.skuItemCurrentPrices[a].QUANTITY_HASH==this.skuItemCurrentQuantityRangeSelected){this.skuItemCurrentPriceSelected=a;break}}else for(var a in this.currentPrices)if(this.currentPrices.hasOwnProperty(a)&&this.currentPrices[a].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=a;break}}},getMinPriceRange:function(){var t;if(this.obSkuItems)for(var s in this.skuItemCurrentQuantityRanges)this.skuItemCurrentQuantityRanges.hasOwnProperty(s)&&(!t||parseInt(this.skuItemCurrentQuantityRanges[s].SORT_FROM)<parseInt(t.SORT_FROM))&&(t=this.skuItemCurrentQuantityRanges[s]);else for(var s in this.currentQuantityRanges)this.currentQuantityRanges.hasOwnProperty(s)&&(!t||parseInt(this.currentQuantityRanges[s].SORT_FROM)<parseInt(t.SORT_FROM))&&(t=this.currentQuantityRanges[s]);return t},checkQuantityControls:function(){if(!this.obSkuItems&&this.obQuantity||this.obSkuItems&&this.obSkuItemQuantity){var t=this.obSkuItems?this.skuItemCheckQuantity&&parseFloat(this.obSkuItemQuantity.value)+this.skuItemStepQuantity>this.skuItemMaxQuantity:this.checkQuantity&&parseFloat(this.obQuantity.value)+this.stepQuantity>this.maxQuantity,s=this.obSkuItems?parseFloat(this.obSkuItemQuantity.value)-this.skuItemStepQuantity<this.skuItemMinQuantity:parseFloat(this.obQuantity.value)-this.stepQuantity<this.minQuantity;t?BX.addClass(this.obSkuItems?this.obSkuItemQuantityUp:this.obQuantityUp,"product-item-detail-amount-btn-disabled"):BX.hasClass(this.obSkuItems?this.obSkuItemQuantityUp:this.obQuantityUp,"product-item-detail-amount-btn-disabled")&&BX.removeClass(this.obSkuItems?this.obSkuItemQuantityUp:this.obQuantityUp,"product-item-detail-amount-btn-disabled"),s?BX.addClass(this.obSkuItems?this.obSkuItemQuantityDown:this.obQuantityDown,"product-item-detail-amount-btn-disabled"):BX.hasClass(this.obSkuItems?this.obSkuItemQuantityDown:this.obQuantityDown,"product-item-detail-amount-btn-disabled")&&BX.removeClass(this.obSkuItems?this.obSkuItemQuantityDown:this.obQuantityDown,"product-item-detail-amount-btn-disabled"),t&&s?(this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).setAttribute("disabled","disabled"):(this.obSkuItems?this.obSkuItemQuantity:this.obQuantity).removeAttribute("disabled")}if(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity){var i=this.obSkuItems?this.skuItemCheckQuantity&&parseFloat(this.obSkuItemPcQuantity.value)+this.skuItemStepPcQuantity>this.skuItemMaxPcQuantity:this.checkQuantity&&parseFloat(this.obPcQuantity.value)+this.stepPcQuantity>this.maxPcQuantity,e=this.obSkuItems?parseFloat(this.obSkuItemPcQuantity.value)-this.skuItemStepPcQuantity<this.skuItemMinPcQuantity:parseFloat(this.obPcQuantity.value)-this.stepPcQuantity<this.minPcQuantity;i?BX.addClass(this.obSkuItems?this.obSkuItemPcQuantityUp:this.obPcQuantityUp,"product-item-detail-amount-btn-disabled"):BX.hasClass(this.obSkuItems?this.obSkuItemPcQuantityUp:this.obPcQuantityUp,"product-item-detail-amount-btn-disabled")&&BX.removeClass(this.obSkuItems?this.obSkuItemPcQuantityUp:this.obPcQuantityUp,"product-item-detail-amount-btn-disabled"),e?BX.addClass(this.obSkuItems?this.obSkuItemPcQuantityDown:this.obPcQuantityDown,"product-item-detail-amount-btn-disabled"):BX.hasClass(this.obSkuItems?this.obSkuItemPcQuantityDown:this.obPcQuantityDown,"product-item-detail-amount-btn-disabled")&&BX.removeClass(this.obSkuItems?this.obSkuItemPcQuantityDown:this.obPcQuantityDown,"product-item-detail-amount-btn-disabled"),i&&e?(this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).setAttribute("disabled","disabled"):(this.obSkuItems?this.obSkuItemPcQuantity:this.obPcQuantity).removeAttribute("disabled");var a=this.obSkuItems?this.skuItemCheckQuantity&&parseFloat(this.obSkuItemSqMQuantity.value)+this.skuItemStepSqMQuantity>this.skuItemMaxSqMQuantity:this.checkQuantity&&parseFloat(this.obSqMQuantity.value)+this.stepSqMQuantity>this.maxSqMQuantity,o=this.obSkuItems?parseFloat(this.obSkuItemSqMQuantity.value)-this.skuItemStepSqMQuantity<this.skuItemMinSqMQuantity:parseFloat(this.obSqMQuantity.value)-this.stepSqMQuantity<this.minSqMQuantity;a?BX.addClass(this.obSkuItems?this.obSkuItemSqMQuantityUp:this.obSqMQuantityUp,"product-item-detail-amount-btn-disabled"):BX.hasClass(this.obSkuItems?this.obSkuItemSqMQuantityUp:this.obSqMQuantityUp,"product-item-detail-amount-btn-disabled")&&BX.removeClass(this.obSkuItems?this.obSkuItemSqMQuantityUp:this.obSqMQuantityUp,"product-item-detail-amount-btn-disabled"),o?BX.addClass(this.obSkuItems?this.obSkuItemSqMQuantityDown:this.obSqMQuantityDown,"product-item-detail-amount-btn-disabled"):BX.hasClass(this.obSkuItems?this.obSkuItemSqMQuantityDown:this.obSqMQuantityDown,"product-item-detail-amount-btn-disabled")&&BX.removeClass(this.obSkuItems?this.obSkuItemSqMQuantityDown:this.obSqMQuantityDown,"product-item-detail-amount-btn-disabled"),a&&o?(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).setAttribute("disabled","disabled"):(this.obSkuItems?this.obSkuItemSqMQuantity:this.obSqMQuantity).removeAttribute("disabled")}},setPrice:function(){var t,s="";!this.obSkuItems&&this.obQuantity&&!this.obPcQuantity&&!this.obSqMQuantity||this.obSkuItems&&this.obSkuItemQuantity&&!this.obSkuItemPcQuantity&&!this.obSkuItemSqMQuantity?this.checkPriceRange(this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value):(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity)&&(this.obSkuItems?this.checkPriceRange(this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE?this.obSkuItemPcQuantity.value:this.obSkuItemSqMQuantity.value):"pc. 1"==this.currentMeasure.SYMBOL_INTL||"m2"==this.currentMeasure.SYMBOL_INTL?this.checkPriceRange(this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value):this.checkPriceRange(this.obQuantity.value)),this.checkQuantityControls(),t=this.obSkuItems?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected]:this.currentPrices[this.currentPriceSelected],(!this.obSkuItems&&this.obPrice||this.obSkuItems)&&(t?((!this.obSkuItems&&this.obPriceCurrent||this.obSkuItems&&this.obSkuItemPriceCurrent)&&(t.SQ_M_PRICE?BX.adjust(this.obSkuItems?this.obSkuItemPriceCurrent:this.obPriceCurrent,{html:BX.Currency.currencyFormat(t.SQ_M_PRICE,t.CURRENCY,!0),style:{display:this.obSkuItems?"":t.SQ_M_PRICE>0?"":"none"}}):BX.adjust(this.obSkuItems?this.obSkuItemPriceCurrent:this.obPriceCurrent,{html:BX.Currency.currencyFormat(t.PRICE,t.CURRENCY,!0),style:{display:this.obSkuItems?"":t.PRICE>0?"":"none"}})),this.obPriceNotSet&&(t.SQ_M_PRICE?BX.adjust(this.obPriceNotSet,{style:{display:t.SQ_M_PRICE>0?"none":""}}):BX.adjust(this.obPriceNotSet,{style:{display:t.PRICE>0?"none":""}}))):(this.obPriceCurrent&&BX.adjust(this.obPriceCurrent,{html:"",style:{display:"none"}}),this.obPriceNotSet&&BX.adjust(this.obPriceNotSet,{style:{display:"none"}})),t&&t.PRICE!==t.BASE_PRICE?(this.config.showOldPrice&&((this.obSkuItems?this.obSkuItemPriceOld:this.obPriceOld)&&BX.adjust(this.obSkuItems?this.obSkuItemPriceOld:this.obPriceOld,{style:{display:""},html:BX.Currency.currencyFormat(t.SQ_M_BASE_PRICE?t.SQ_M_BASE_PRICE:t.BASE_PRICE,t.CURRENCY,!0)}),(!this.obSkuItems&&this.obPriceDiscount||this.obSkuItems&&this.obSkuItemPriceDiscount)&&(s=(s=BX.message("CATALOG_ELEMENT_ARTICLE_ECONOMY_INFO_MESSAGE")).replace("#ECONOMY#",BX.Currency.currencyFormat(t.SQ_M_DISCOUNT?t.SQ_M_DISCOUNT:t.DISCOUNT,t.CURRENCY,!0)),BX.adjust(this.obSkuItems?this.obSkuItemPriceDiscount:this.obPriceDiscount,{style:{display:""},html:s}))),this.config.showPercent&&(this.obPricePercent&&BX.removeClass(this.obPricePercent,"product-item-detail-marker-container-hidden"),this.obPricePercentVal&&BX.adjust(this.obPricePercentVal,{html:-t.PERCENT+"%"}))):(this.config.showOldPrice&&(this.obPriceOld&&BX.adjust(this.obPriceOld,{style:{display:"none"},html:""}),this.obPriceDiscount&&BX.adjust(this.obPriceDiscount,{style:{display:"none"},html:""})),this.config.showPercent&&(this.obPricePercent&&BX.addClass(this.obPricePercent,"product-item-detail-marker-container-hidden"),this.obPricePercentVal&&BX.adjust(this.obPricePercentVal,{html:""})))),this.obTotalCost&&(!this.obQuantity||this.obPcQuantity||this.obSqMQuantity?this.obPcQuantity&&this.obSqMQuantity&&(t&&t.PRICE>0?"pc. 1"==this.currentMeasure.SYMBOL_INTL||"m2"==this.currentMeasure.SYMBOL_INTL?1!=this.obPcQuantity.value||1!=this.obSqMQuantity.value?(BX.adjust(this.obTotalCost,{style:{display:""}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:BX.Currency.currencyFormat(t.PRICE*(t.SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value),t.CURRENCY,!0)})):(BX.adjust(this.obTotalCost,{style:{display:"none"}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:""})):1!=this.obQuantity.value?(BX.adjust(this.obTotalCost,{style:{display:""}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:BX.Currency.currencyFormat(t.PRICE*this.obQuantity.value,t.CURRENCY,!0)})):(BX.adjust(this.obTotalCost,{style:{display:"none"}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:""})):(BX.adjust(this.obTotalCost,{style:{display:"none"}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:""}))):t&&t.PRICE>0&&1!=this.obQuantity.value?(BX.adjust(this.obTotalCost,{style:{display:""}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:BX.Currency.currencyFormat(t.PRICE*this.obQuantity.value,t.CURRENCY,!0)})):(BX.adjust(this.obTotalCost,{style:{display:"none"}}),this.obTotalCostVal&&BX.adjust(this.obTotalCostVal,{html:""})))},delay:function(){this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context);var t,s,i=BX.hasClass(this.obSkuItems?this.obSkuItemDelay:this.obDelay,"product-item-detail-delayed");switch(this.productType){case 0:case 1:case 2:t=this.product.id;break;case 3:t=this.obSkuItems?this.skuItem.ID:this.offers[this.offerNum].ID}this.config.showQuantity?!this.obSkuItems&&this.obQuantity&&!this.obPcQuantity&&!this.obSqMQuantity||this.obSkuItems&&this.obSkuItemQuantity&&!this.obSkuItemPcQuantity&&!this.obSkuItemSqMQuantity?s=this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value:(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity)&&(s=this.obSkuItems?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE?this.obSkuItemPcQuantity.value:this.obSkuItemSqMQuantity.value:"pc. 1"==this.currentMeasure.SYMBOL_INTL||"m2"==this.currentMeasure.SYMBOL_INTL?this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value:this.obQuantity.value):s=this.obSkuItems?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected]?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].MIN_QUANTITY:"":this.currentPrices[this.currentPriceSelected]?this.currentPrices[this.currentPriceSelected].MIN_QUANTITY:"",BX.ajax({method:"POST",dataType:"json",url:this.delayData.delayPath,data:{siteId:BX.message("SITE_ID"),action:i?"DELETE_FROM_DELAY":"ADD_TO_DELAY",id:t,quantity:s},onsuccess:BX.proxy(this.delayResult,this)})},delayResult:function(t){t.STATUS&&("ADDED"===t.STATUS?(this.setDelayed(!0),this.setBuyedAdded(!1),!this.obSkuItems&&this.offers.length>0&&(this.offers[this.offerNum].DELAYED=!0,this.offers[this.offerNum].BUYED_ADDED=!1)):"DELETED"===t.STATUS&&(this.setDelayed(!1),!this.obSkuItems&&this.offers.length>0&&(this.offers[this.offerNum].DELAYED=!1)),BX.onCustomEvent("OnBasketDelayChange"))},setDelayed:function(t){if((this.obSkuItems||this.obDelay)&&(!this.obSkuItems||this.obSkuItemDelay)){var s=this.getEntity(this.obSkuItems?this.obSkuItemDelay:this.obDelay,"delay-icon");BX.adjust(this.obSkuItems?this.obSkuItemDelay:this.obDelay,{props:{className:"product-item-detail-delay"+(t?"ed":""),title:t?BX.message("CATALOG_ELEMENT_ARTICLE_DELAY_OK_MESSAGE"):BX.message("CATALOG_ELEMENT_ARTICLE_DELAY_MESSAGE")}}),s&&BX.adjust(s,{props:{className:t?"icon-star-s":"icon-star"}})}},setDelayInfo:function(t){if(BX.type.isArray(t))for(var s in this.offers)this.offers.hasOwnProperty(s)&&(this.obSkuItems?(this.skuItemContainer=this.obSkuItems.querySelector('[data-num="'+s+'"]'),this.skuItemContainer&&(this.obSkuItemDelay=this.skuItemContainer.querySelector('[data-entity="delay"]'),this.setDelayed(BX.util.in_array(this.offers[s].ID,t)))):this.offers[s].DELAYED=BX.util.in_array(this.offers[s].ID,t))},setBuyedAdded:function(t){var s=this.obSkuItems?BX.util.in_array("BUY",this.config.basketAction)?this.obSkuItemBuyBtn:this.obSkuItemAddToBasketBtn:BX.util.in_array("BUY",this.config.basketAction)?this.obBuyBtn:this.obAddToBasketBtn;s&&(t?(BX.adjust(s,{props:{className:"btn btn-buy-ok"},html:'<i class="icon-ok-b"></i><span>'+BX.message("CATALOG_ELEMENT_ARTICLE_ADD_BASKET_OK_MESSAGE")+"</span>"}),BX.unbindAll(s),BX.bind(s,"click",BX.delegate(this.basketRedirect,this))):(BX.adjust(s,{props:{className:"btn btn-buy"},html:'<i class="icon-cart"></i><span>'+BX.message("CATALOG_ELEMENT_ARTICLE_ADD_BASKET_MESSAGE")+"</span>"}),BX.unbindAll(s),BX.bind(s,"click",BX.proxy(BX.util.in_array("BUY",this.config.basketAction)?this.buyBasket:this.add2Basket,this))))},setBuyAddInfo:function(t){if(BX.type.isArray(t))for(var s in this.offers)this.offers.hasOwnProperty(s)&&(this.obSkuItems?(this.skuItemContainer=this.obSkuItems.querySelector('[data-num="'+s+'"]'),this.skuItemContainer&&(this.obSkuItemBuyBtn=this.skuItemContainer.querySelector('[data-entity="buy"]'),this.obSkuItemAddToBasketBtn=this.skuItemContainer.querySelector('[data-entity="add"]'),this.setBuyedAdded(BX.util.in_array(this.offers[s].ID,t)))):this.offers[s].BUYED_ADDED=BX.util.in_array(this.offers[s].ID,t))},compare:function(t){this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context);var s=this.getEntity(this.obSkuItems?this.obSkuItemCompare:this.obCompare,"compare-checkbox"),i=BX.getEventTarget(t),e=!0;s&&(e=i===s?s.checked:!s.checked);var a,o=e?this.compareData.compareUrl:this.compareData.compareDeleteUrl;if(o){switch(i!==s&&(BX.PreventDefault(t),this.setCompared(e)),this.productType){case 0:case 1:case 2:a=o.replace("#ID#",this.product.id.toString());break;case 3:a=this.obSkuItems?o.replace("#ID#",this.skuItem.ID):o.replace("#ID#",this.offers[this.offerNum].ID)}BX.ajax({method:"POST",dataType:e?"json":"html",url:a+(-1!==a.indexOf("?")?"&":"?")+"ajax_action=Y",onsuccess:e?BX.proxy(this.compareResult,this):BX.proxy(this.compareDeleteResult,this)})}},compareResult:function(t){BX.type.isPlainObject(t)&&(!this.obSkuItems&&this.offers.length>0&&(this.offers[this.offerNum].COMPARED="OK"===t.STATUS),"OK"===t.STATUS&&BX.onCustomEvent("OnCompareChange"))},compareDeleteResult:function(){BX.onCustomEvent("OnCompareChange"),!this.obSkuItems&&this.offers&&this.offers.length&&(this.offers[this.offerNum].COMPARED=!1)},setCompared:function(t){if((this.obSkuItems||this.obCompare)&&(!this.obSkuItems||this.obSkuItemCompare)){var s=this.getEntity(this.obSkuItems?this.obSkuItemCompare:this.obCompare,"compare-checkbox");s&&(s.checked=t);var i=this.getEntity(this.obSkuItems?this.obSkuItemCompare:this.obCompare,"compare-title");i&&(i.innerHTML=t?BX.message("CATALOG_ELEMENT_ARTICLE_COMPARE_OK_MESSAGE"):BX.message("CATALOG_ELEMENT_ARTICLE_COMPARE_MESSAGE"))}},setCompareInfo:function(t){if(BX.type.isArray(t))for(var s in this.offers)this.offers.hasOwnProperty(s)&&(this.obSkuItems?(this.skuItemContainer=this.obSkuItems.querySelector('[data-num="'+s+'"]'),this.skuItemContainer&&(this.obSkuItemCompare=this.skuItemContainer.querySelector('[data-entity="compare"]'),this.setCompared(BX.util.in_array(this.offers[s].ID,t)))):this.offers[s].COMPARED=BX.util.in_array(this.offers[s].ID,t))},checkDeletedCompare:function(t){switch(this.productType){case 0:case 1:case 2:this.product.id==t&&this.setCompared(!1);break;case 3:for(var s=this.offers.length;s--;)if(this.offers[s].ID==t){this.obSkuItems?(this.skuItemContainer=this.obSkuItems.querySelector('[data-num="'+s+'"]'),this.skuItemContainer&&(this.obSkuItemCompare=this.skuItemContainer.querySelector('[data-entity="compare"]'),this.setCompared(!1))):(this.offers[s].COMPARED=!1,this.offerNum==s&&this.setCompared(!1));break}}},scrollToSkuItems:function(){if(this.obSkuItems){var s=document.querySelector(".top-panel"),i=0,e=!!s&&s.querySelector(".top-panel__thead"),a=(!!s&&s.querySelector(".top-panel__tfoot"),document.body.querySelector('[data-entity="tabs"]')),o=BX.GetWindowScrollPos().scrollTop;t.innerWidth<992?e&&(i=e.offsetHeight):s&&(i=s.offsetHeight),new BX.easing({duration:500,start:{scroll:o},finish:{scroll:BX.pos(this.obSkuItems).top-(a?a.offsetHeight:0)-i},transition:BX.easing.makeEaseOut(BX.easing.transitions.quint),step:function(s){t.scrollTo(0,s.scroll)}}).animate()}},initBasketUrl:function(){switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());break;case 3:this.obSkuItems?this.basketUrl=this.basketUrl.replace("#ID#",this.skuItem.ID):this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID)}this.basketParams={ajax_basket:"Y"},this.config.showQuantity?!this.obSkuItems&&this.obQuantity&&!this.obPcQuantity&&!this.obSqMQuantity||this.obSkuItems&&this.obSkuItemQuantity&&!this.obSkuItemPcQuantity&&!this.obSkuItemSqMQuantity?this.basketParams[this.basketData.quantity]=this.obSkuItems?this.obSkuItemQuantity.value:this.obQuantity.value:(!this.obSkuItems&&this.obPcQuantity&&this.obSqMQuantity||this.obSkuItems&&this.obSkuItemPcQuantity&&this.obSkuItemSqMQuantity)&&(this.obSkuItems?this.basketParams[this.basketData.quantity]=this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].SQ_M_PRICE?this.obSkuItemPcQuantity.value:this.obSkuItemSqMQuantity.value:"pc. 1"==this.currentMeasure.SYMBOL_INTL||"m2"==this.currentMeasure.SYMBOL_INTL?this.basketParams[this.basketData.quantity]=this.currentPrices[this.currentPriceSelected].SQ_M_PRICE?this.obPcQuantity.value:this.obSqMQuantity.value:this.basketParams[this.basketData.quantity]=this.obQuantity.value):this.obSkuItems?this.basketParams[this.basketData.quantity]=this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected]?this.skuItemCurrentPrices[this.skuItemCurrentPriceSelected].MIN_QUANTITY:"":this.basketParams[this.basketData.quantity]=this.currentPrices[this.currentPriceSelected]?this.currentPrices[this.currentPriceSelected].MIN_QUANTITY:"",this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props)},fillBasketProps:function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,i=!1,e=null;if((e=BX(this.visual.BASKET_PROP_DIV))&&(s=e.getElementsByTagName("input"))&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,i=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,i=!0)}i||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},showBasketPropsDropDownPopup:function(t,s){var i=t.querySelector('[data-entity="dropdownContent"]');this.obPopupWin&&this.obPopupWin.close(),this.obPopupWin=BX.PopupWindowManager.create("basketPropsDropDown"+s+"_"+this.visual.ID,t,{autoHide:!0,offsetLeft:0,offsetTop:3,overlay:!1,draggable:{restrict:!0},closeByEsc:!0,className:"bx-drop-down-popup-window",content:BX.clone(i)}),i.parentNode.appendChild(BX("basketPropsDropDown"+s+"_"+this.visual.ID)),this.obPopupWin.show()},selectBasketPropsDropDownPopupItem:function(t,s){var i=BX.findParent(t,{className:"product-item-detail-basket-props-drop-down"},!1),e=i.querySelector("INPUT"),a=i.querySelector('[data-entity="current-option"]');e.value=s,a.innerHTML=t.innerHTML,BX.PopupWindowManager.getCurrentPopup().close()},sendToBasket:function(){!this.obSkuItems&&!this.canBuy||this.obSkuItems&&!this.skuItemCanBuy||(this.initBasketUrl(),this.fillBasketProps(),BX.ajax({method:"POST",dataType:"json",url:this.basketUrl,data:this.basketParams,onsuccess:BX.proxy(this.basketResult,this)}))},add2Basket:function(){this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),this.basketMode="ADD",this.basket()},buyBasket:function(){this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context),this.basketMode="BUY",this.basket()},basket:function(){!this.obSkuItems&&!this.canBuy||this.obSkuItems&&!this.skuItemCanBuy||this.sendToBasket()},basketResult:function(t){if("OK"===t.STATUS)if("BUY"==this.basketMode)this.basketRedirect();else if(this.obSkuItems)this.setBuyedAdded(!0),this.setDelayed(!1),BX.onCustomEvent("OnBasketChange"),this.setAnalyticsDataLayer("addToCart");else{var s,i=document.querySelector('[data-entity="videos-images-container"]'),e=i.offsetWidth;switch(this.productType){case 1:case 2:s=this.product.pict.SRC;break;case 3:s=this.offers[this.offerNum].DETAIL_PICTURE?this.offers[this.offerNum].DETAIL_PICTURE.SRC:this.defaultPict.pict.SRC}s&&document.body.appendChild(BX.create("IMG",{props:{className:"animated-image"},style:{width:e+"px",position:"absolute","z-index":"1100"},attrs:{src:s}}));var a=document.body.querySelector(".animated-image");if(a){var o=document.querySelector(".top-panel").querySelector(".mini-cart__cart");new BX.easing({duration:500,start:{width:e,left:BX.pos(i).left,top:BX.pos(i).top},finish:{width:70,left:BX.pos(o).left,top:BX.pos(o).top},transition:BX.easing.transitions.linear,step:BX.delegate(function(t){a.style.width=t.width+"px",a.style.left=t.left+"px",a.style.top=t.top+"px"},this),complete:BX.delegate(function(){BX.remove(a),this.setBuyedAdded(!0),this.setDelayed(!1),this.offers.length>0&&(this.offers[this.offerNum].BUYED_ADDED=!0,this.offers[this.offerNum].DELAYED=!1),BX.onCustomEvent("OnBasketChange"),this.setAnalyticsDataLayer("addToCart")},this)}).animate()}}},showObjectWorkingHoursToday:function(){var t=this.obSkuItems.querySelectorAll('[data-entity="hours"]');if(t)for(var s in t)if(t.hasOwnProperty(s)&&BX.type.isDomNode(t[s])){var i=BX.findParent(t[s],{attrs:{"data-entity":"sku-item"}});if(i){var e=parseInt(i.getAttribute("data-num")),a=this.offers[e];t[s].innerHTML='<div class="product-item-detail-scu-item-object-hours-loader"><div><span></span></div></div>'+BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_LOADING"),BX.removeClass(t[s],"product-item-detail-scu-item-object-hours-hidden"),BX.delegate(function(s){BX.ajax({url:BX.message("CATALOG_ELEMENT_ARTICLE_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"objectWorkingHoursToday",timezone:a.OBJECT?a.OBJECT.TIMEZONE:"",workingHours:a.OBJECT?a.OBJECT.WORKING_HOURS:""},onsuccess:BX.delegate(function(i){var e="",a=i.today;if(a){for(var o in a)a.hasOwnProperty(o)&&(a[o].STATUS&&(e+='<span class="product-item-detail-scu-item-object-hours-icon product-item-detail-scu-item-object-hours-icon-'+("OPEN"==a[o].STATUS?"open":"closed")+'"></span>'),a[o].WORK_START&&a[o].WORK_END?a[o].WORK_START!=a[o].WORK_END?(e+=a[o].WORK_START+" - "+a[o].WORK_END,a[o].BREAK_START&&a[o].BREAK_END&&a[o].BREAK_START!=a[o].BREAK_END&&(e+='<span class="product-item-detail-scu-item-object-hours-break">',e+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_BREAK")+" "+a[o].BREAK_START+" - "+a[o].BREAK_END,e+="</span>")):e+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_24_HOURS"):e+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_OFF"));var n=BX.findParent(t[s],{attrs:{"data-entity":"sku-item"}});if(n){var r=parseInt(n.getAttribute("data-num"));this.offers[r].OBJECT.WORKING_HOURS_TODAY=a}}t[s].innerHTML=e,0==e.length&&BX.addClass(t[s],"product-item-detail-scu-item-object-hours-hidden")},this)})},this)(s)}}},getObjectWorkingHoursToday:function(t){BX.ajax({url:BX.message("CATALOG_ELEMENT_ARTICLE_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"objectWorkingHoursToday",timezone:this.object.timezone,workingHours:this.object.workingHours},onsuccess:BX.delegate(function(s){s.today&&(this.object.workingHoursToday=s.today),BX.onCustomEvent(this,"objectWorkingHoursTodayReceived",[t])},this)})},adjustObjectContacts:function(t){var s="";if(this.object.address||Object.keys(this.object.workingHours).length>0||this.object.workingHoursToday||Object.keys(this.object.phone).length>0||Object.keys(this.object.email).length>0||Object.keys(this.object.skype).length>0){if(s+='<div class="slide-panel__contacts" id="'+this.visual.ID+'_contacts">',this.object.address&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-map-marker"></i></div>',s+='<div class="slide-panel__contacts-item__text">'+this.object.address+"</div>",s+="</div>",s+="</div>"),this.object.workingHoursToday)for(var i in this.object.workingHoursToday)this.object.workingHoursToday.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item" data-entity="working-hours-today">',s+='<div class="slide-panel__contacts-item__hours-today">',s+='<div class="slide-panel__contacts-item__today-container">',s+='<div class="slide-panel__contacts-item__today">',s+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>',s+='<span class="slide-panel__contacts-item__today-title">'+BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_TODAY")+"</span>",this.object.workingHoursToday[i].STATUS&&(s+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.object.workingHoursToday[i].STATUS?"open":"closed")+'"></span>'),s+="</div>",s+="</div>",s+='<div class="slide-panel__contacts-item__hours-break">',s+='<div class="slide-panel__contacts-item__hours slide-panel__contacts-item__hours-first">',s+='<span class="slide-panel__contacts-item__hours-title">',this.object.workingHoursToday[i].WORK_START&&this.object.workingHoursToday[i].WORK_END?this.object.workingHoursToday[i].WORK_START!=this.object.workingHoursToday[i].WORK_END?s+=this.object.workingHoursToday[i].WORK_START+" - "+this.object.workingHoursToday[i].WORK_END:s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_24_HOURS"):s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_OFF"),s+="</span>",s+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-down"></i></span>',s+="</div>",this.object.workingHoursToday[i].WORK_START&&this.object.workingHoursToday[i].WORK_END&&this.object.workingHoursToday[i].WORK_START!=this.object.workingHoursToday[i].WORK_END&&this.object.workingHoursToday[i].BREAK_START&&this.object.workingHoursToday[i].BREAK_END&&this.object.workingHoursToday[i].BREAK_START!=this.object.workingHoursToday[i].BREAK_END&&(s+='<div class="slide-panel__contacts-item__break">',s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_BREAK")+" "+this.object.workingHoursToday[i].BREAK_START+" - "+this.object.workingHoursToday[i].BREAK_END,s+="</div>"),s+="</div>",s+="</div>",s+="</div>");if(Object.keys(this.object.workingHours).length>0){s+='<div class="slide-panel__contacts-item" data-entity="working-hours"'+(this.object.workingHoursToday?'style="display: none;"':"")+">";var e=0;for(var i in this.object.workingHours)this.object.workingHours.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item__hours-today">',s+='<div class="slide-panel__contacts-item__today-container">',s+='<div class="slide-panel__contacts-item__today">',0==e&&(s+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>'),s+='<span class="slide-panel__contacts-item__today-title">'+(this.object.workingHoursToday&&this.object.workingHoursToday.hasOwnProperty(i)?BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_TODAY"):this.object.workingHours[i].NAME)+"</span>",this.object.workingHoursToday&&this.object.workingHoursToday.hasOwnProperty(i)&&this.object.workingHoursToday[i].STATUS&&(s+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.object.workingHoursToday[i].STATUS?"open":"closed")+'"></span>'),s+="</div>",s+="</div>",s+='<div class="slide-panel__contacts-item__hours-break">',s+='<div class="slide-panel__contacts-item__hours'+(0==e?" slide-panel__contacts-item__hours-first":"")+'">',s+='<span class="slide-panel__contacts-item__hours-title">',this.object.workingHours[i].WORK_START&&this.object.workingHours[i].WORK_END?this.object.workingHours[i].WORK_START!=this.object.workingHours[i].WORK_END?s+=this.object.workingHours[i].WORK_START+" - "+this.object.workingHours[i].WORK_END:s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_24_HOURS"):s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_OFF"),s+="</span>",this.object.workingHoursToday&&0==e&&(s+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-up"></i></span>'),s+="</div>",this.object.workingHours[i].WORK_START&&this.object.workingHours[i].WORK_END&&this.object.workingHours[i].WORK_START!=this.object.workingHours[i].WORK_END&&this.object.workingHours[i].BREAK_START&&this.object.workingHours[i].BREAK_END&&this.object.workingHours[i].BREAK_START!=this.object.workingHours[i].BREAK_END&&(s+='<div class="slide-panel__contacts-item__break">',s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_BREAK")+" "+this.object.workingHours[i].BREAK_START+" - "+this.object.workingHours[i].BREAK_END,s+="</div>"),s+="</div>",s+="</div>",e++);s+="</div>"}if(Object.keys(this.object.phone).length>0)for(var i in this.object.phone)this.object.phone.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-phone"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__phone slide-panel__contacts-item__link" href="tel:'+this.object.phone[i].replace(/[^\d\+]/g,"")+'">'+this.object.phone[i]+"</a>",this.object.phoneDescription.hasOwnProperty(i)&&this.object.phoneDescription[i].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.object.phoneDescription[i]+"</span>"),s+="</div>",s+="</div>",s+="</div>");if(Object.keys(this.object.email).length>0)for(var i in this.object.email)this.object.email.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-mail"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__link" href="mailto:'+this.object.email[i]+'">'+this.object.email[i]+"</a>",this.object.emailDescription.hasOwnProperty(i)&&this.object.emailDescription[i].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.object.emailDescription[i]+"</span>"),s+="</div>",s+="</div>",s+="</div>");if(Object.keys(this.object.skype).length>0)for(var i in this.object.skype)this.object.skype.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="fa fa-skype"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__link" href="skype:'+this.object.skype[i]+'?chat">'+this.object.skype[i]+"</a>",this.object.skypeDescription.hasOwnProperty(i)&&this.object.skypeDescription[i].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.object.skypeDescription[i]+"</span>"),s+="</div>",s+="</div>",s+="</div>");s+="</div>"}this.object.content=s,BX.onCustomEvent(this,"objectContactsAdjusted",[t])},adjustSkuItemObjectContacts:function(t){var s="";if(this.skuItemObject.address||Object.keys(this.skuItemObject.workingHours).length>0||this.skuItemObject.workingHoursToday||Object.keys(this.skuItemObject.phone).length>0||Object.keys(this.skuItemObject.email).length>0||Object.keys(this.skuItemObject.skype).length>0){if(s+='<div class="slide-panel__contacts" id="'+this.visual.ID+"_"+this.skuItem.ID+'_contacts">',this.skuItemObject.address&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-map-marker"></i></div>',s+='<div class="slide-panel__contacts-item__text">'+this.skuItemObject.address+"</div>",s+="</div>",s+="</div>"),this.skuItemObject.workingHoursToday)for(var i in this.skuItemObject.workingHoursToday)this.skuItemObject.workingHoursToday.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item" data-entity="working-hours-today">',s+='<div class="slide-panel__contacts-item__hours-today">',s+='<div class="slide-panel__contacts-item__today-container">',s+='<div class="slide-panel__contacts-item__today">',s+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>',s+='<span class="slide-panel__contacts-item__today-title">'+BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_TODAY")+"</span>",this.skuItemObject.workingHoursToday[i].STATUS&&(s+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.skuItemObject.workingHoursToday[i].STATUS?"open":"closed")+'"></span>'),s+="</div>",s+="</div>",s+='<div class="slide-panel__contacts-item__hours-break">',s+='<div class="slide-panel__contacts-item__hours slide-panel__contacts-item__hours-first">',s+='<span class="slide-panel__contacts-item__hours-title">',this.skuItemObject.workingHoursToday[i].WORK_START&&this.skuItemObject.workingHoursToday[i].WORK_END?this.skuItemObject.workingHoursToday[i].WORK_START!=this.skuItemObject.workingHoursToday[i].WORK_END?s+=this.skuItemObject.workingHoursToday[i].WORK_START+" - "+this.skuItemObject.workingHoursToday[i].WORK_END:s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_24_HOURS"):s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_OFF"),s+="</span>",s+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-down"></i></span>',s+="</div>",this.skuItemObject.workingHoursToday[i].WORK_START&&this.skuItemObject.workingHoursToday[i].WORK_END&&this.skuItemObject.workingHoursToday[i].WORK_START!=this.skuItemObject.workingHoursToday[i].WORK_END&&this.skuItemObject.workingHoursToday[i].BREAK_START&&this.skuItemObject.workingHoursToday[i].BREAK_END&&this.skuItemObject.workingHoursToday[i].BREAK_START!=this.skuItemObject.workingHoursToday[i].BREAK_END&&(s+='<div class="slide-panel__contacts-item__break">',s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_BREAK")+" "+this.skuItemObject.workingHoursToday[i].BREAK_START+" - "+this.skuItemObject.workingHoursToday[i].BREAK_END,s+="</div>"),s+="</div>",s+="</div>",s+="</div>");if(Object.keys(this.skuItemObject.workingHours).length>0){s+='<div class="slide-panel__contacts-item" data-entity="working-hours"'+(this.skuItemObject.workingHoursToday?'style="display: none;"':"")+">";var e=0;for(var i in this.skuItemObject.workingHours)this.skuItemObject.workingHours.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item__hours-today">',s+='<div class="slide-panel__contacts-item__today-container">',s+='<div class="slide-panel__contacts-item__today">',0==e&&(s+='<span class="slide-panel__contacts-item__today-icon"><i class="icon-clock"></i></span>'),s+='<span class="slide-panel__contacts-item__today-title">'+(this.skuItemObject.workingHoursToday&&this.skuItemObject.workingHoursToday.hasOwnProperty(i)?BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_TODAY"):this.skuItemObject.workingHours[i].NAME)+"</span>",this.skuItemObject.workingHoursToday&&this.skuItemObject.workingHoursToday.hasOwnProperty(i)&&this.skuItemObject.workingHoursToday[i].STATUS&&(s+='<span class="slide-panel__contacts-item__today-status slide-panel__contacts-item__today-status-'+("OPEN"==this.skuItemObject.workingHoursToday[i].STATUS?"open":"closed")+'"></span>'),s+="</div>",s+="</div>",s+='<div class="slide-panel__contacts-item__hours-break">',s+='<div class="slide-panel__contacts-item__hours'+(0==e?" slide-panel__contacts-item__hours-first":"")+'">',s+='<span class="slide-panel__contacts-item__hours-title">',this.skuItemObject.workingHours[i].WORK_START&&this.skuItemObject.workingHours[i].WORK_END?this.skuItemObject.workingHours[i].WORK_START!=this.skuItemObject.workingHours[i].WORK_END?s+=this.skuItemObject.workingHours[i].WORK_START+" - "+this.skuItemObject.workingHours[i].WORK_END:s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_24_HOURS"):s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_OFF"),s+="</span>",this.skuItemObject.workingHoursToday&&0==e&&(s+='<span class="slide-panel__contacts-item__hours-icon"><i class="icon-arrow-up"></i></span>'),s+="</div>",this.skuItemObject.workingHours[i].WORK_START&&this.skuItemObject.workingHours[i].WORK_END&&this.skuItemObject.workingHours[i].WORK_START!=this.skuItemObject.workingHours[i].WORK_END&&this.skuItemObject.workingHours[i].BREAK_START&&this.skuItemObject.workingHours[i].BREAK_END&&this.skuItemObject.workingHours[i].BREAK_START!=this.skuItemObject.workingHours[i].BREAK_END&&(s+='<div class="slide-panel__contacts-item__break">',s+=BX.message("CATALOG_ELEMENT_ARTICLE_OBJECT_BREAK")+" "+this.skuItemObject.workingHours[i].BREAK_START+" - "+this.skuItemObject.workingHours[i].BREAK_END,s+="</div>"),s+="</div>",s+="</div>",e++);s+="</div>"}if(Object.keys(this.skuItemObject.phone).length>0)for(var i in this.skuItemObject.phone)this.skuItemObject.phone.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-phone"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__phone slide-panel__contacts-item__link" href="tel:'+this.skuItemObject.phone[i].replace(/[^\d\+]/g,"")+'">'+this.skuItemObject.phone[i]+"</a>",this.skuItemObject.phoneDescription.hasOwnProperty(i)&&this.skuItemObject.phoneDescription[i].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.skuItemObject.phoneDescription[i]+"</span>"),s+="</div>",s+="</div>",s+="</div>");if(Object.keys(this.skuItemObject.email).length>0)for(var i in this.skuItemObject.email)this.skuItemObject.email.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="icon-mail"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__link" href="mailto:'+this.skuItemObject.email[i]+'">'+this.skuItemObject.email[i]+"</a>",this.skuItemObject.emailDescription.hasOwnProperty(i)&&this.skuItemObject.emailDescription[i].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.skuItemObject.emailDescription[i]+"</span>"),s+="</div>",s+="</div>",s+="</div>");if(Object.keys(this.skuItemObject.skype).length>0)for(var i in this.skuItemObject.skype)this.skuItemObject.skype.hasOwnProperty(i)&&(s+='<div class="slide-panel__contacts-item">',s+='<div class="slide-panel__contacts-item__block">',s+='<div class="slide-panel__contacts-item__icon"><i class="fa fa-skype"></i></div>',s+='<div class="slide-panel__contacts-item__text">',s+='<a class="slide-panel__contacts-item__link" href="skype:'+this.skuItemObject.skype[i]+'?chat">'+this.skuItemObject.skype[i]+"</a>",this.skuItemObject.skypeDescription.hasOwnProperty(i)&&this.skuItemObject.skypeDescription[i].length>0&&(s+='<span class="slide-panel__contacts-item__descr">'+this.skuItemObject.skypeDescription[i]+"</span>"),s+="</div>",s+="</div>",s+="</div>");s+="</div>"}this.skuItemObject.content=s,BX.onCustomEvent(this,"skuItemObjectContactsAdjusted",[t])},objectContactsFormRequest:function(t){BX.ajax({url:BX.message("SITE_DIR")+"ajax/slide_panel.php",method:"POST",dataType:"json",timeout:60,data:{action:this.obSkuItems&&"OBJECTS"==this.offersView&&!this.skuItemObject.id?"callback":"callback_objects"},onsuccess:BX.delegate(function(s){s.content&&s.JS?BX.ajax.processScripts(BX.processHTML(s.JS).SCRIPT,!1,BX.delegate(function(){var i=BX.processHTML(s.content),e=BX.create("DIV");e.innerHTML=i.HTML;var a=e.querySelector('[name="OBJECT_ID"]');a&&(a.value=this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.id:this.object.id),t.innerHTML=(this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.content:this.object.content)+e.innerHTML,BX.ajax.processScripts(i.SCRIPT)},this)):t.innerHTML=this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.content:this.object.content,$(t).scrollbar()},this)})},objectContactsForm:function(s){if(this.sPanel){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"},html:this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.name:this.object.name}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},children:[BX.create("DIV",{props:{className:"slide-panel__loader"},html:"<div><span></span></div>"})]}));var i=this.sPanel.querySelector(".slide-panel__content");i&&BX.onCustomEvent(this,this.obSkuItems&&"OBJECTS"==this.offersView?"adjustSkuItemObjectContacts":"getObjectWorkingHoursToday",[i]);var e=t.innerWidth-document.body.clientWidth;if(e>0){BX.style(document.body,"padding-right",e+"px");var a=document.querySelector(".page-bg");a&&BX.style(a,"margin-right",e+"px");var o=document.querySelector(".top-panel");if(o){BX.hasClass(o,"fixed")&&BX.style(o,"padding-right",e+"px");var n=o.querySelector(".top-panel__thead");n&&BX.hasClass(n,"fixed")&&BX.style(n,"padding-right",e+"px");var r=o.querySelector(".top-panel__tfoot");r&&BX.hasClass(r,"fixed")&&BX.style(r,"padding-right",e+"px")}var h=document.body.querySelector('[data-entity="tabs"]');h&&BX.hasClass(h,"fixed")&&BX.style(h,"padding-right",e+"px")}var u=BX.GetWindowScrollPos().scrollTop;u&&u>0&&BX.style(document.body,"top","-"+u+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}})),s.stopPropagation()}},objectContactsRequest:function(t){t.innerHTML=this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.content:this.object.content,$(t).scrollbar()},objectContacts:function(s){if(this.sPanel){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"},html:this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.name:this.object.name}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},children:[BX.create("DIV",{props:{className:"slide-panel__loader"},html:"<div><span></span></div>"})]}));var i=this.sPanel.querySelector(".slide-panel__content");i&&BX.onCustomEvent(this,this.obSkuItems&&"OBJECTS"==this.offersView?"adjustSkuItemObjectContacts":"getObjectWorkingHoursToday",[i]);var e=t.innerWidth-document.body.clientWidth;if(e>0){BX.style(document.body,"padding-right",e+"px");var a=document.querySelector(".page-bg");a&&BX.style(a,"margin-right",e+"px");var o=document.querySelector(".top-panel");if(o){BX.hasClass(o,"fixed")&&BX.style(o,"padding-right",e+"px");var n=o.querySelector(".top-panel__thead");n&&BX.hasClass(n,"fixed")&&BX.style(n,"padding-right",e+"px");var r=o.querySelector(".top-panel__tfoot");r&&BX.hasClass(r,"fixed")&&BX.style(r,"padding-right",e+"px")}var h=document.body.querySelector('[data-entity="tabs"]');h&&BX.hasClass(h,"fixed")&&BX.style(h,"padding-right",e+"px")}var u=BX.GetWindowScrollPos().scrollTop;u&&u>0&&BX.style(document.body,"top","-"+u+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}})),s.stopPropagation()}},partnerSiteRedirect:function(){this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context);var s,i=t.open("","_blank");switch(this.productType){case 1:case 2:s=this.product.id;break;case 3:s=this.obSkuItems?this.skuItem.ID:this.offers[this.offerNum].ID}BX.ajax({url:BX.message("CATALOG_ELEMENT_ARTICLE_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"partnerSiteRedirect",productId:s},onsuccess:function(t){t.partnersUrl&&(i.location=t.partnersUrl)}})},sPanelFormRequest:function(t,s,i,e,a,o,n){BX.ajax({url:BX.message("SITE_DIR")+"ajax/slide_panel.php",method:"POST",dataType:"json",timeout:60,data:{action:t},onsuccess:BX.delegate(function(t){t.content&&t.JS?BX.ajax.processScripts(BX.processHTML(t.JS).SCRIPT,!1,BX.delegate(function(){var r=BX.processHTML(t.content),h=BX.create("DIV");h.innerHTML=r.HTML;var u=this.sPanel.querySelector(".slide-panel__title"),c=h.querySelector(".slide-panel__form-title"),l=h.querySelector('[type="submit"]');c&&(u.innerHTML=c.innerHTML,l&&(l.innerHTML="<span>"+c.innerHTML+"</span>"),BX.remove(c));var d=h.querySelector('[name="OBJECT_ID"]');d&&o&&(d.value=o);var m=h.querySelector('[name="PRODUCT_ID"]');m&&s&&(m.value=s);var b=h.querySelector('[name="OFFER_ID"]');b&&i&&(b.value=i);var y=h.querySelector('[name="PRODUCT_LINK"]');y&&a&&(y.value=a);var p=h.querySelector('[name="MESSAGE"]');if(p&&e){var I=p.getAttribute("placeholder");BX.adjust(p,{attrs:{placeholder:I?I+' "'+e+'"':e}})}n.innerHTML=h.innerHTML,BX.ajax.processScripts(r.SCRIPT)},this)):(BX.cleanNode(n),n.appendChild(BX.create("DIV",{props:{className:"slide-panel__form"},children:[BX.create("DIV",{props:{className:"alert alert-error alert-show"},html:BX.message("SLIDE_PANEL_UNDEFINED_ERROR")})]}))),$(n).scrollbar()},this)})},sPanelForm:function(s){if(this.sPanel){this.obSkuItems&&this.checkCurrentSkuItem(BX.proxy_context);var i,e,a,o,n=BX.proxy_context&&BX.proxy_context.getAttribute(this.obSkuItems?"data-entity":"id"),r=this.product.id,h=t.location.href.split("?")[0],u=this.obSkuItems&&"OBJECTS"==this.offersView?this.skuItemObject.id:this.object.id;switch(!this.obSkuItems&&n==this.visual.ASK_PRICE_LINK||this.obSkuItems&&"ask-price"==n?(i=u?"ask_price_objects":"ask_price",e="icon-comment"):(!this.obSkuItems&&n==this.visual.NOT_AVAILABLE_MESS||this.obSkuItems&&"not-available"==n)&&(i=u?"not_available_objects":"not_available",e="icon-clock"),this.productType){case 1:case 2:o=this.product.name;break;case 3:a=this.obSkuItems?this.skuItem.ID:this.offers[this.offerNum].ID,o=this.obSkuItems?this.skuItem.NAME:this.offers[this.offerNum].NAME,h+="?OFFER_ID="+a}this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:e}}),BX.create("SPAN",{props:{className:"slide-panel__title"}}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},children:[BX.create("DIV",{props:{className:"slide-panel__loader"},html:"<div><span></span></div>"})]}));var c=this.sPanel.querySelector(".slide-panel__content");c&&BX.onCustomEvent(this,"sPanelFormRequest",[i,r,a,o,h,u,c]);var l=t.innerWidth-document.body.clientWidth;if(l>0){BX.style(document.body,"padding-right",l+"px");var d=document.querySelector(".page-bg");d&&BX.style(d,"margin-right",l+"px");var m=document.querySelector(".top-panel");if(m){BX.hasClass(m,"fixed")&&BX.style(m,"padding-right",l+"px");var b=m.querySelector(".top-panel__thead");b&&BX.hasClass(b,"fixed")&&BX.style(b,"padding-right",l+"px");var y=m.querySelector(".top-panel__tfoot");y&&BX.hasClass(y,"fixed")&&BX.style(y,"padding-right",l+"px")}var p=document.body.querySelector('[data-entity="tabs"]');p&&BX.hasClass(p,"fixed")&&BX.style(p,"padding-right",l+"px")}var I=BX.GetWindowScrollPos().scrollTop;I&&I>0&&BX.style(document.body,"top","-"+I+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}})),s.stopPropagation()}},basketRedirect:function(){t.location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("CATALOG_ELEMENT_ARTICLE_BASKET_URL")}})}(window);