!function(t){"use strict";t.JCNewsListContacts||(t.JCNewsListContacts=function(t){this.visual={ID:""},this.item={timezone:"",workingHours:{}},this.sPanel=null,this.obItem=null,this.errorCode=0,"object"==typeof t&&(this.visual=t.VISUAL,this.item.timezone=t.ITEM.TIMEZONE,this.item.workingHours=t.ITEM.WORKING_HOURS,BX.ready(BX.delegate(this.init,this)))},t.JCNewsListContacts.prototype={init:function(){if(this.obItem=BX(this.visual.ID),this.obItem||(this.errorCode=-1),0===this.errorCode){this.sPanel=document.body.querySelector(".slide-panel"),this.showWorkingHoursToday();var t=this.obItem.querySelector('[data-entity="callback"]');t&&BX.bind(t,"click",BX.proxy(this.showCallbackForm,this)),BX.addCustomEvent(this,"showCallbackFormRequest",BX.proxy(this.showCallbackFormRequest,this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.findParent(t.target,{attrs:{id:this.visual.ID}})&&BX.hasClass(t.target,"icon-arrow-down")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours-today"}});s&&BX.style(s,"display","none");var i=this.obItem.querySelector('[data-entity="working-hours-all"]');i&&BX.style(i,"display",""),t.stopPropagation()}},this)),BX.bind(document,"click",BX.delegate(function(t){if(BX.findParent(t.target,{attrs:{id:this.visual.ID}})&&BX.hasClass(t.target,"icon-arrow-up")){var s=BX.findParent(t.target,{attrs:{"data-entity":"working-hours-all"}});s&&BX.style(s,"display","none");var i=this.obItem.querySelector('[data-entity="working-hours-today"]');i&&BX.style(i,"display",""),t.stopPropagation()}},this))}},showWorkingHoursToday:function(){var t=this.obItem.querySelector(".contacts-item-working-hours");t&&(t.innerHTML='<div class="contacts-item-icon"><div class="contacts-item-loader"><div><span></span></div></div></div><div class="contacts-item-text">'+BX.message("CONTACTS_LOADING")+"</div>",BX.removeClass(t,"contacts-item-working-hours-hidden"),BX.ajax({url:BX.message("CONTACTS_TEMPLATE_PATH")+"/ajax.php",method:"POST",dataType:"json",timeout:60,data:{action:"workingHoursToday",timezone:this.item.timezone,workingHours:this.item.workingHours},onsuccess:BX.delegate(function(s){var i="";if(s.today)for(var o in this.item.workingHoursToday=s.today,this.item.workingHoursToday)this.item.workingHoursToday.hasOwnProperty(o)&&(i+='<div class="contacts-item-working-hours-today" data-entity="working-hours-today">',i+='<div class="contacts-item-today-container">',i+='<div class="contacts-item-today">',i+='<span class="contacts-item-icon contacts-item-today-icon"><i class="icon-clock"></i></span>',i+='<span class="contacts-item-today-title">'+BX.message("CONTACTS_ITEM_TODAY")+"</span>",this.item.workingHoursToday[o].STATUS&&(i+='<span class="contacts-item-today-status contacts-item-today-status-'+("OPEN"==this.item.workingHoursToday[o].STATUS?"open":"closed")+'"></span>'),i+="</div>",i+="</div>",i+='<div class="contacts-item-hours-break">',i+='<div class="contacts-item-hours contacts-item-hours-first">',i+='<span class="contacts-item-hours-title">',this.item.workingHoursToday[o].WORK_START&&this.item.workingHoursToday[o].WORK_END?this.item.workingHoursToday[o].WORK_START!=this.item.workingHoursToday[o].WORK_END?i+=this.item.workingHoursToday[o].WORK_START+" - "+this.item.workingHoursToday[o].WORK_END:i+=BX.message("CONTACTS_ITEM_24_HOURS"):i+=BX.message("CONTACTS_ITEM_OFF"),i+="</span>",i+='<span class="contacts-item-hours-icon"><i class="icon-arrow-down"></i></span>',i+="</div>",this.item.workingHoursToday[o].WORK_START&&this.item.workingHoursToday[o].WORK_END&&this.item.workingHoursToday[o].WORK_START!=this.item.workingHoursToday[o].WORK_END&&this.item.workingHoursToday[o].BREAK_START&&this.item.workingHoursToday[o].BREAK_END&&this.item.workingHoursToday[o].BREAK_START!=this.item.workingHoursToday[o].BREAK_END&&(i+='<div class="contacts-item-break">',i+=BX.message("CONTACTS_ITEM_BREAK")+" "+this.item.workingHoursToday[o].BREAK_START+" - "+this.item.workingHoursToday[o].BREAK_END,i+="</div>"),i+="</div>",i+="</div>");if(this.item.workingHours){i+='<div class="contacts-item-working-hours-all" data-entity="working-hours-all"'+(this.item.workingHoursToday?'style="display: none;"':"")+">";var e=0;for(var o in this.item.workingHours)this.item.workingHours.hasOwnProperty(o)&&(i+='<div class="contacts-item-working-hours-today">',i+='<div class="contacts-item-today-container">',i+='<div class="contacts-item-today">',0==e&&(i+='<span class="contacts-item-icon contacts-item-today-icon"><i class="icon-clock"></i></span>'),i+='<span class="contacts-item-today-title">'+(this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(o)?BX.message("CONTACTS_ITEM_TODAY"):this.item.workingHours[o].NAME)+"</span>",this.item.workingHoursToday&&this.item.workingHoursToday.hasOwnProperty(o)&&this.item.workingHoursToday[o].STATUS&&(i+='<span class="contacts-item-today-status contacts-item-today-status-'+("OPEN"==this.item.workingHoursToday[o].STATUS?"open":"closed")+'"></span>'),i+="</div>",i+="</div>",i+='<div class="contacts-item-hours-break">',i+='<div class="contacts-item-hours'+(0==e?" contacts-item-hours-first":"")+'">',i+='<span class="contacts-item-hours-title">',this.item.workingHours[o].WORK_START&&this.item.workingHours[o].WORK_END?this.item.workingHours[o].WORK_START!=this.item.workingHours[o].WORK_END?i+=this.item.workingHours[o].WORK_START+" - "+this.item.workingHours[o].WORK_END:i+=BX.message("CONTACTS_ITEM_24_HOURS"):i+=BX.message("CONTACTS_ITEM_OFF"),i+="</span>",this.item.workingHoursToday&&0==e&&(i+='<span class="contacts-item-hours-icon"><i class="icon-arrow-up"></i></span>'),i+="</div>",this.item.workingHours[o].WORK_START&&this.item.workingHours[o].WORK_END&&this.item.workingHours[o].WORK_START!=this.item.workingHours[o].WORK_END&&this.item.workingHours[o].BREAK_START&&this.item.workingHours[o].BREAK_END&&this.item.workingHours[o].BREAK_START!=this.item.workingHours[o].BREAK_END&&(i+='<div class="contacts-item-break">',i+=BX.message("CONTACTS_ITEM_BREAK")+" "+this.item.workingHours[o].BREAK_START+" - "+this.item.workingHours[o].BREAK_END,i+="</div>"),i+="</div>",i+="</div>",e++);i+="</div>"}t.innerHTML=i,0==i.length&&BX.addClass(t,"contacts-item-working-hours-hidden")},this)}))},showCallbackFormRequest:function(t){BX.ajax({url:BX.message("SITE_DIR")+"ajax/slide_panel.php",method:"POST",dataType:"json",timeout:60,data:{action:"callback"},onsuccess:BX.delegate(function(s){s.content&&s.JS?BX.ajax.processScripts(BX.processHTML(s.JS).SCRIPT,!1,BX.delegate(function(){var i=BX.processHTML(s.content),o=BX.create("DIV");o.innerHTML=i.HTML;var e=this.sPanel.querySelector(".slide-panel__title"),a=o.querySelector(".slide-panel__form-title"),r=o.querySelector('[type="submit"]');a&&(e.innerHTML=a.innerHTML,r&&(r.innerHTML="<span>"+a.innerHTML+"</span>"),BX.remove(a)),t.innerHTML=o.innerHTML,BX.ajax.processScripts(i.SCRIPT)},this)):(BX.cleanNode(t),t.appendChild(BX.create("DIV",{props:{className:"slide-panel__form"},children:[BX.create("DIV",{props:{className:"alert alert-error alert-show"},html:BX.message("SLIDE_PANEL_UNDEFINED_ERROR")})]}))),$(t).scrollbar()},this)})},showCallbackForm:function(s){if(this.sPanel){this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__title-wrap"},children:[BX.create("I",{props:{className:"icon-phone-call"}}),BX.create("SPAN",{props:{className:"slide-panel__title"}}),BX.create("SPAN",{props:{className:"slide-panel__close"},children:[BX.create("I",{props:{className:"icon-close"}})]})]})),this.sPanel.appendChild(BX.create("DIV",{props:{className:"slide-panel__content scrollbar-inner"},children:[BX.create("DIV",{props:{className:"slide-panel__loader"},html:"<div><span></span></div>"})]}));var i=this.sPanel.querySelector(".slide-panel__content");i&&BX.onCustomEvent(this,"showCallbackFormRequest",[i]);var o=t.innerWidth-document.body.clientWidth;if(o>0){BX.style(document.body,"padding-right",o+"px");var e=document.querySelector(".page-bg");e&&BX.style(e,"margin-right",o+"px");var a=document.querySelector(".top-panel");if(a){BX.hasClass(a,"fixed")&&BX.style(a,"padding-right",o+"px");var r=a.querySelector(".top-panel__thead");r&&BX.hasClass(r,"fixed")&&BX.style(r,"padding-right",o+"px");var n=a.querySelector(".top-panel__tfoot");n&&BX.hasClass(n,"fixed")&&BX.style(n,"padding-right",o+"px")}var c=document.querySelector(".catalog-section-panel");c&&BX.hasClass(c,"fixed")&&BX.style(c,"padding-right",o+"px");var d=document.querySelector('[data-entity="tabs"]');d&&BX.hasClass(d,"fixed")&&BX.style(d,"padding-right",o+"px");var l=document.querySelector(".objects-map");l&&BX.style(l,"padding-right",o+"px")}var h=BX.GetWindowScrollPos().scrollTop;h&&h>0&&BX.style(document.body,"top","-"+h+"px"),BX.addClass(document.body,"slide-panel-active"),BX.addClass(this.sPanel,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop slide-panel__backdrop fadeInBig"}})),s.stopPropagation()}}})}(window);